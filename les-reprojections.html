<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 8 Les reprojections | Analyses spatiales avec R</title>
  <meta name="description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 8 Les reprojections | Analyses spatiales avec R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 8 Les reprojections | Analyses spatiales avec R" />
  
  <meta name="twitter:description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  

<meta name="author" content="Maël THEULIERE, Jean-Daniel LOMENEDE, Juliette ENGELAERE-LEFEBVRE" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="operations-geometriques.html"/>
<link rel="next" href="geocodage.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.26/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="libs/flatbush-4.0.0/flatbush.min.js"></script>
<link href="libs/ggiraphjs-0.4.6/ggiraphjs.min.css" rel="stylesheet" />
<script src="libs/ggiraphjs-0.4.6/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding-0.8.5/girafe.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><p style="text-align:center;"><img src="https://mtes-mct.github.io/parcours-r/assets/images/logo_marianne_fond_blanc.png" style="width:100px;"/></p></li>
<li><a href="./index.html">Les données spatiales avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#le-parcours-de-formation"><i class="fa fa-check"></i>Le parcours de formation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#le-groupe-de-référents-r-du-pôle-ministériel"><i class="fa fa-check"></i>Le groupe de référents R du pôle ministériel</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectifs-de-ce-module"><i class="fa fa-check"></i>Objectifs de ce module</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i><b>1</b> Bien commencer</a>
<ul>
<li class="chapter" data-level="1.1" data-path="get-started.html"><a href="get-started.html#créer-un-projet-sous-rstudio-pour-vous-permettre-de-recenser-vos-travaux."><i class="fa fa-check"></i><b>1.1</b> Créer un projet sous Rstudio pour vous permettre de recenser vos travaux.</a></li>
<li class="chapter" data-level="1.2" data-path="get-started.html"><a href="get-started.html#utilisation-du-package-savoirfr"><i class="fa fa-check"></i><b>1.2</b> Utilisation du package <code>{savoirfR}</code></a></li>
<li class="chapter" data-level="1.3" data-path="get-started.html"><a href="get-started.html#créer-votre-arborescence-de-projet"><i class="fa fa-check"></i><b>1.3</b> Créer votre arborescence de projet</a></li>
<li class="chapter" data-level="1.4" data-path="get-started.html"><a href="get-started.html#activer-les-packages-nécessaires"><i class="fa fa-check"></i><b>1.4</b> Activer les packages nécessaires</a></li>
<li class="chapter" data-level="1.5" data-path="get-started.html"><a href="get-started.html#bien-structurer-ses-projets-data"><i class="fa fa-check"></i><b>1.5</b> Bien structurer ses projets data</a></li>
</ul></li>
<li class="part"><span><b>I Introduction aux données spatiales</b></span></li>
<li class="chapter" data-level="2" data-path="modelisation.html"><a href="modelisation.html"><i class="fa fa-check"></i><b>2</b> La modélisation des données spatiales</a>
<ul>
<li class="chapter" data-level="2.1" data-path="modelisation.html"><a href="modelisation.html#les-données-vecteur"><i class="fa fa-check"></i><b>2.1</b> Les données vecteur</a></li>
<li class="chapter" data-level="2.2" data-path="modelisation.html"><a href="modelisation.html#les-données-raster"><i class="fa fa-check"></i><b>2.2</b> Les données raster</a></li>
<li class="chapter" data-level="2.3" data-path="modelisation.html"><a href="modelisation.html#la-structuration-des-données-géographiques-avec-r"><i class="fa fa-check"></i><b>2.3</b> La structuration des données géographiques avec R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="modelisation.html"><a href="modelisation.html#sf-pour-les-données-vecteur"><i class="fa fa-check"></i><b>2.3.1</b> <code>{sf}</code> pour les données vecteur</a></li>
<li class="chapter" data-level="2.3.2" data-path="modelisation.html"><a href="modelisation.html#terra-raster-et-stars-pour-les-données-raster"><i class="fa fa-check"></i><b>2.3.2</b> {terra}, {raster} et {stars} pour les données raster</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="modelisation.html"><a href="modelisation.html#format-des-objets-spatiaux-sf"><i class="fa fa-check"></i><b>2.4</b> Format des objets spatiaux <code>sf</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="crs.html"><a href="crs.html"><i class="fa fa-check"></i><b>3</b> Les Systèmes de Coordonnées de Référence</a>
<ul>
<li class="chapter" data-level="3.1" data-path="crs.html"><a href="crs.html#le-système-géodésique-ou-datum"><i class="fa fa-check"></i><b>3.1</b> Le système géodésique ou datum</a></li>
<li class="chapter" data-level="3.2" data-path="crs.html"><a href="crs.html#les-coordonnées"><i class="fa fa-check"></i><b>3.2</b> Les coordonnées</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="crs.html"><a href="crs.html#coordonnées-géographiques"><i class="fa fa-check"></i><b>3.2.1</b> Coordonnées géographiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="crs.html"><a href="crs.html#coordonnées-en-projection"><i class="fa fa-check"></i><b>3.2.2</b> Coordonnées en projection</a></li>
<li class="chapter" data-level="3.2.3" data-path="crs.html"><a href="crs.html#exemple-de-projections"><i class="fa fa-check"></i><b>3.2.3</b> Exemple de projections</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="crs.html"><a href="crs.html#code-epsg"><i class="fa fa-check"></i><b>3.3</b> Code EPSG</a></li>
</ul></li>
<li class="part"><span><b>II Lire et écrire des données spatiales</b></span></li>
<li class="chapter" data-level="4" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html"><i class="fa fa-check"></i><b>4</b> Lire et écrire des données spatiales avec R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-fichiers-plats"><i class="fa fa-check"></i><b>4.1</b> Lire des fichiers plats</a></li>
<li class="chapter" data-level="4.2" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#ecrire-des-fichiers-plats"><i class="fa fa-check"></i><b>4.2</b> Ecrire des fichiers plats</a></li>
<li class="chapter" data-level="4.3" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-spatiales-du-web"><i class="fa fa-check"></i><b>4.3</b> Lire des données spatiales du web</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-geojson"><i class="fa fa-check"></i><b>4.3.1</b> Lire des données geojson</a></li>
<li class="chapter" data-level="4.3.2" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#exemple-3-geojson-compressé"><i class="fa fa-check"></i><b>4.3.2</b> Exemple 3 (geojson compressé)</a></li>
<li class="chapter" data-level="4.3.3" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-wfs"><i class="fa fa-check"></i><b>4.3.3</b> Lire des données WFS</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lireécrire-des-données-spatiales-sur-postgis"><i class="fa fa-check"></i><b>4.4</b> Lire/écrire des données spatiales sur PostGIS</a></li>
<li class="chapter" data-level="4.5" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#convertir-un-dataframe"><i class="fa fa-check"></i><b>4.5</b> Convertir un dataframe</a></li>
<li class="chapter" data-level="4.6" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#données-contenues-dans-des-packages"><i class="fa fa-check"></i><b>4.6</b> Données contenues dans des packages</a></li>
</ul></li>
<li class="part"><span><b>III Manipuler des données spatiales</b></span></li>
<li class="chapter" data-level="5" data-path="operation-sur-donnees-attributaires.html"><a href="operation-sur-donnees-attributaires.html"><i class="fa fa-check"></i><b>5</b> Les opérations sur données attributaires</a></li>
<li class="chapter" data-level="6" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html"><i class="fa fa-check"></i><b>6</b> Les opérations spatiales sur les données</a>
<ul>
<li class="chapter" data-level="6.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#filtrer"><i class="fa fa-check"></i><b>6.1</b> Filtrer</a></li>
<li class="chapter" data-level="6.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#prédicats-spatiaux"><i class="fa fa-check"></i><b>6.2</b> Prédicats spatiaux</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#exercice-1---manipuler-des-objets-sf"><i class="fa fa-check"></i><b>6.2.1</b> Exercice 1 - manipuler des objets sf</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#les-jointures-spatiales"><i class="fa fa-check"></i><b>6.3</b> Les jointures spatiales</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#jointure-de-points-avec-des-polygones"><i class="fa fa-check"></i><b>6.3.1</b> Jointure de points avec des polygones</a></li>
<li class="chapter" data-level="6.3.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#jointure-de-polygones-avec-des-polygones"><i class="fa fa-check"></i><b>6.3.2</b> Jointure de polygones avec des polygones</a></li>
<li class="chapter" data-level="6.3.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#exercice-2-exploitation-des-données-dvf-en-api"><i class="fa fa-check"></i><b>6.3.3</b> Exercice 2 : exploitation des données DVF en API</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#les-mesures"><i class="fa fa-check"></i><b>6.4</b> Les mesures</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#calcul-de-surface"><i class="fa fa-check"></i><b>6.4.1</b> Calcul de surface</a></li>
<li class="chapter" data-level="6.4.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#matrice-de-distances"><i class="fa fa-check"></i><b>6.4.2</b> Matrice de distances</a></li>
<li class="chapter" data-level="6.4.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#identification-du-plus-proche-voisin"><i class="fa fa-check"></i><b>6.4.3</b> Identification du plus proche voisin</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#carroyage"><i class="fa fa-check"></i><b>6.5</b> Carroyage</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#créer-une-grille-régulière"><i class="fa fa-check"></i><b>6.5.1</b> Créer une grille régulière</a></li>
<li class="chapter" data-level="6.5.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#compter-des-points-dans-un-polygone"><i class="fa fa-check"></i><b>6.5.2</b> Compter des points dans un polygone</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="operations-geometriques.html"><a href="operations-geometriques.html"><i class="fa fa-check"></i><b>7</b> Les opérations géométriques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#opérations-unaires"><i class="fa fa-check"></i><b>7.1</b> Opérations unaires</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#simplification"><i class="fa fa-check"></i><b>7.1.1</b> Simplification</a></li>
<li class="chapter" data-level="7.1.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#centroïde"><i class="fa fa-check"></i><b>7.1.2</b> Centroïde</a></li>
<li class="chapter" data-level="7.1.3" data-path="operations-geometriques.html"><a href="operations-geometriques.html#buffer"><i class="fa fa-check"></i><b>7.1.3</b> Buffer</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#opérations-binaires"><i class="fa fa-check"></i><b>7.2</b> Opérations binaires</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#transformation-affine"><i class="fa fa-check"></i><b>7.2.1</b> Transformation affine</a></li>
<li class="chapter" data-level="7.2.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#découpage"><i class="fa fa-check"></i><b>7.2.2</b> Découpage</a></li>
<li class="chapter" data-level="7.2.3" data-path="operations-geometriques.html"><a href="operations-geometriques.html#union"><i class="fa fa-check"></i><b>7.2.3</b> Union</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="les-reprojections.html"><a href="les-reprojections.html"><i class="fa fa-check"></i><b>8</b> Les reprojections</a>
<ul>
<li class="chapter" data-level="8.1" data-path="les-reprojections.html"><a href="les-reprojections.html#un-premier-exemple-de-reprojection"><i class="fa fa-check"></i><b>8.1</b> Un premier exemple de reprojection</a></li>
<li class="chapter" data-level="8.2" data-path="les-reprojections.html"><a href="les-reprojections.html#quand-reprojeter"><i class="fa fa-check"></i><b>8.2</b> Quand reprojeter ?</a></li>
<li class="chapter" data-level="8.3" data-path="les-reprojections.html"><a href="les-reprojections.html#quel-crs-utiliser"><i class="fa fa-check"></i><b>8.3</b> Quel CRS utiliser ?</a></li>
<li class="chapter" data-level="8.4" data-path="les-reprojections.html"><a href="les-reprojections.html#comment-projeter"><i class="fa fa-check"></i><b>8.4</b> Comment projeter ?</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="les-reprojections.html"><a href="les-reprojections.html#projeter-des-vecteurs"><i class="fa fa-check"></i><b>8.4.1</b> Projeter des vecteurs</a></li>
<li class="chapter" data-level="8.4.2" data-path="les-reprojections.html"><a href="les-reprojections.html#modifier-la-projection-dune-carte."><i class="fa fa-check"></i><b>8.4.2</b> Modifier la projection d’une carte.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="geocodage.html"><a href="geocodage.html"><i class="fa fa-check"></i><b>9</b> Géocodage</a>
<ul>
<li class="chapter" data-level="9.1" data-path="geocodage.html"><a href="geocodage.html#géolocalisation-à-ladresse"><i class="fa fa-check"></i><b>9.1</b> Géolocalisation à l’adresse</a></li>
<li class="chapter" data-level="9.2" data-path="geocodage.html"><a href="geocodage.html#digitalisation"><i class="fa fa-check"></i><b>9.2</b> Digitalisation</a></li>
</ul></li>
<li class="part"><span><b>IV Créer des cartes sous R</b></span></li>
<li class="chapter" data-level="10" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html"><i class="fa fa-check"></i><b>10</b> Créer des cartes statiques avec {ggplot2}</a>
<ul>
<li class="chapter" data-level="10.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#librairies"><i class="fa fa-check"></i><b>10.1</b> Librairies</a></li>
<li class="chapter" data-level="10.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#introduction-les-cartes-statiques-en-r"><i class="fa fa-check"></i><b>10.2</b> Introduction : les cartes statiques en R</a></li>
<li class="chapter" data-level="10.3" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#quelques-rappels-sur-ggplot2"><i class="fa fa-check"></i><b>10.3</b> Quelques rappels sur <code>{ggplot2}</code></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ggplot2-les-concepts-clefs"><i class="fa fa-check"></i><b>10.3.1</b> <code>{ggplot2}</code> : les concepts clefs</a></li>
<li class="chapter" data-level="10.3.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ggplot2-pour-les-cartes"><i class="fa fa-check"></i><b>10.3.2</b> {ggplot2} pour les cartes</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#faire-des-cartes-avec-ggplot2"><i class="fa fa-check"></i><b>10.4</b> Faire des cartes avec {ggplot2}</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#préparation-des-données"><i class="fa fa-check"></i><b>10.4.1</b> Préparation des données</a></li>
<li class="chapter" data-level="10.4.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-cartes-choroplèthe"><i class="fa fa-check"></i><b>10.4.2</b> Les cartes choroplèthe</a></li>
<li class="chapter" data-level="10.4.3" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-cartes-à-ronds-proportionnels"><i class="fa fa-check"></i><b>10.4.3</b> Les cartes à ronds proportionnels</a></li>
<li class="chapter" data-level="10.4.4" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#lhabillage-simple"><i class="fa fa-check"></i><b>10.4.4</b> L’habillage simple</a></li>
<li class="chapter" data-level="10.4.5" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-thèmes"><i class="fa fa-check"></i><b>10.4.5</b> Les thèmes</a></li>
<li class="chapter" data-level="10.4.6" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-scales"><i class="fa fa-check"></i><b>10.4.6</b> Les scales</a></li>
<li class="chapter" data-level="10.4.7" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exercice-3---carte-des-données-dvf-par-quartie-de-nantes"><i class="fa fa-check"></i><b>10.4.7</b> Exercice 3 - Carte des données dvf par quartie de Nantes</a></li>
<li class="chapter" data-level="10.4.8" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-facettes"><i class="fa fa-check"></i><b>10.4.8</b> Les facettes</a></li>
<li class="chapter" data-level="10.4.9" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ajouter-une-barre-déchelle-et-la-flèche-du-nord"><i class="fa fa-check"></i><b>10.4.9</b> Ajouter une barre d’échelle et la flèche du nord</a></li>
<li class="chapter" data-level="10.4.10" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#mettre-plusieurs-cartes-côte-à-côte"><i class="fa fa-check"></i><b>10.4.10</b> Mettre plusieurs cartes côte à côte</a></li>
<li class="chapter" data-level="10.4.11" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exporter-sa-carte"><i class="fa fa-check"></i><b>10.4.11</b> Exporter sa carte</a></li>
<li class="chapter" data-level="10.4.12" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exercice-4-assemblage-de-cartes-sur-dvf"><i class="fa fa-check"></i><b>10.4.12</b> Exercice 4 : Assemblage de cartes sur dvf</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#faire-des-cartes-avec-mapfactory"><i class="fa fa-check"></i><b>10.5</b> Faire des cartes avec {mapfactory}</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cartogramm.html"><a href="cartogramm.html"><i class="fa fa-check"></i><b>11</b> Créer des cartogrammes</a>
<ul>
<li class="chapter" data-level="11.1" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-daires-contigues"><i class="fa fa-check"></i><b>11.1</b> Cartogramme d’aires contigues</a></li>
<li class="chapter" data-level="11.2" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-daire-non-contigue"><i class="fa fa-check"></i><b>11.2</b> Cartogramme d’aire non contigue</a></li>
<li class="chapter" data-level="11.3" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-de-dorling"><i class="fa fa-check"></i><b>11.3</b> Cartogramme de Dorling</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html"><i class="fa fa-check"></i><b>12</b> Créer des cartes pour le web</a>
<ul>
<li class="chapter" data-level="12.1" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-leaflet"><i class="fa fa-check"></i><b>12.1</b> Les cartes Leaflet</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#carte-choroplète"><i class="fa fa-check"></i><b>12.1.1</b> Carte choroplète</a></li>
<li class="chapter" data-level="12.1.2" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#carte-à-ronds-proportionnels"><i class="fa fa-check"></i><b>12.1.2</b> Carte à ronds proportionnels</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-ggplot"><i class="fa fa-check"></i><b>12.2</b> Les cartes ggplot</a></li>
<li class="chapter" data-level="12.3" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-mapfactory"><i class="fa fa-check"></i><b>12.3</b> Les cartes {mapfactory}</a></li>
<li class="chapter" data-level="12.4" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#exporter-une-sortie-html"><i class="fa fa-check"></i><b>12.4</b> Exporter une sortie html</a></li>
<li class="chapter" data-level="12.5" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#exercice-5-cartes-dvf-pour-le-web"><i class="fa fa-check"></i><b>12.5</b> Exercice 5 : cartes DVF pour le web</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="osm.html"><a href="osm.html"><i class="fa fa-check"></i><b>13</b> Focus sur OpenStreetMap</a>
<ul>
<li class="chapter" data-level="13.1" data-path="osm.html"><a href="osm.html#afficher-une-carte-interactive"><i class="fa fa-check"></i><b>13.1</b> Afficher une carte interactive</a></li>
<li class="chapter" data-level="13.2" data-path="osm.html"><a href="osm.html#importer-les-fonds-de-carte-pour-ggplot"><i class="fa fa-check"></i><b>13.2</b> Importer les fonds de carte pour ggplot</a></li>
<li class="chapter" data-level="13.3" data-path="osm.html"><a href="osm.html#importer-des-données-osm"><i class="fa fa-check"></i><b>13.3</b> Importer des données OSM</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="osm.html"><a href="osm.html#osmdata"><i class="fa fa-check"></i><b>13.3.1</b> <code>{osmdata}</code></a></li>
<li class="chapter" data-level="13.3.2" data-path="osm.html"><a href="osm.html#osmextract"><i class="fa fa-check"></i><b>13.3.2</b> <code>osmextract</code></a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="osm.html"><a href="osm.html#calculer-des-itinéraires"><i class="fa fa-check"></i><b>13.4</b> Calculer des itinéraires</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="osm.html"><a href="osm.html#calcul-dun-itinéraire"><i class="fa fa-check"></i><b>13.4.1</b> Calcul d’un itinéraire</a></li>
<li class="chapter" data-level="13.4.2" data-path="osm.html"><a href="osm.html#calcul-dune-matrice-de-temps"><i class="fa fa-check"></i><b>13.4.2</b> Calcul d’une matrice de temps</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V A propos</b></span></li>
<li class="chapter" data-level="14" data-path="a-propos.html"><a href="a-propos.html"><i class="fa fa-check"></i><b>14</b> A propos de ce document</a>
<ul>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#code-source"><i class="fa fa-check"></i>Code source</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#inspiration"><i class="fa fa-check"></i>Inspiration</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#licence"><i class="fa fa-check"></i>Licence</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#session-info"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html"><i class="fa fa-check"></i><b>15</b> Annexe : créer des cartes avec tmap</a>
<ul>
<li class="chapter" data-level="15.1" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#fonction-tm_shape"><i class="fa fa-check"></i><b>15.1</b> Fonction <code>tm_shape()</code></a></li>
<li class="chapter" data-level="15.2" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemple-de-carte-choroplèthe"><i class="fa fa-check"></i><b>15.2</b> Exemple de carte choroplèthe</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#préparation-des-données-1"><i class="fa fa-check"></i><b>15.2.1</b> Préparation des données</a></li>
<li class="chapter" data-level="15.2.2" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#cartographie"><i class="fa fa-check"></i><b>15.2.2</b> Cartographie</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemple-de-carte-à-ronds-proportionnels"><i class="fa fa-check"></i><b>15.3</b> Exemple de carte à ronds proportionnels</a></li>
<li class="chapter" data-level="15.4" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#discretisation"><i class="fa fa-check"></i><b>15.4</b> Discretisation</a></li>
<li class="chapter" data-level="15.5" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemples-de-cartes-avec-facet"><i class="fa fa-check"></i><b>15.5</b> Exemples de cartes avec facet</a></li>
<li class="chapter" data-level="15.6" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#gestion-des-palettes"><i class="fa fa-check"></i><b>15.6</b> Gestion des palettes</a></li>
<li class="chapter" data-level="15.7" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#la-mise-en-page"><i class="fa fa-check"></i><b>15.7</b> La mise en page</a></li>
<li class="chapter" data-level="15.8" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#assembler-plusieurs-cartes"><i class="fa fa-check"></i><b>15.8</b> Assembler plusieurs cartes</a></li>
<li class="chapter" data-level="15.9" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#tmap-pour-le-web"><i class="fa fa-check"></i><b>15.9</b> tmap pour le web</a></li>
<li class="chapter" data-level="15.10" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#export-dune-carte"><i class="fa fa-check"></i><b>15.10</b> Export d’une carte</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html"><i class="fa fa-check"></i><b>16</b> Exercices corrigés</a>
<ul>
<li class="chapter" data-level="16.1" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-1---manipuler-des-objets-sf-1"><i class="fa fa-check"></i><b>16.1</b> Exercice 1 - manipuler des objets sf</a></li>
<li class="chapter" data-level="16.2" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-2-exploitation-des-données-dvf-en-api-1"><i class="fa fa-check"></i><b>16.2</b> Exercice 2 : exploitation des données DVF en API</a></li>
<li class="chapter" data-level="16.3" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-3-ggplot-chap-10-visualisation-des-données-dvf-en-api"><i class="fa fa-check"></i><b>16.3</b> Exercice 3 ggplot chap 10 : Visualisation des données DVF en API</a></li>
<li class="chapter" data-level="16.4" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-4-assemblage-de-cartes-sur-dvf-1"><i class="fa fa-check"></i><b>16.4</b> Exercice 4 : Assemblage de cartes sur dvf</a></li>
<li class="chapter" data-level="16.5" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-5-cartes-pour-le-web"><i class="fa fa-check"></i><b>16.5</b> Exercice 5 : cartes pour le web</a></li>
<li class="chapter" data-level="16.6" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-6-exercices-bonus-odd"><i class="fa fa-check"></i><b>16.6</b> Exercice 6 : exercices bonus (ODD)</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#chargement-des-données-et-datapréparation"><i class="fa fa-check"></i><b>16.6.1</b> Chargement des données et datapréparation</a></li>
<li class="chapter" data-level="16.6.2" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#datavisualisation"><i class="fa fa-check"></i><b>16.6.2</b> Datavisualisation</a></li>
<li class="chapter" data-level="16.6.3" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#carte-monde"><i class="fa fa-check"></i><b>16.6.3</b> Carte monde</a></li>
<li class="chapter" data-level="16.6.4" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#zoom-sur-les-deux-continents"><i class="fa fa-check"></i><b>16.6.4</b> Zoom sur les deux continents</a></li>
<li class="chapter" data-level="16.6.5" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#assemblage"><i class="fa fa-check"></i><b>16.6.5</b> Assemblage</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://mtes-mct.github.io/parcours-r/">Liste des formations R</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyses spatiales avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="les-reprojections" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapitre 8</span> Les reprojections<a href="les-reprojections.html#les-reprojections" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Dans ce chapitre, nous allons utiliser les librairies suivantes.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="les-reprojections.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CRAN</span></span>
<span id="cb131-2"><a href="les-reprojections.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot) </span>
<span id="cb131-3"><a href="les-reprojections.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview) </span>
<span id="cb131-4"><a href="les-reprojections.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb131-5"><a href="les-reprojections.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb131-6"><a href="les-reprojections.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code></pre></div>
<p>Pour rappel, il existe deux types de CRS, les CRS géographiques (longitude/latitude avec pour unité de compte des degrés) et les CRS projetés (avec un datum et une unité en mètre par exemple).</p>
<p>Autrefois, la plupart des fonctions de <code>sf</code> présupposaient de travailler avec un CRS projeté, car les fonctions de GEOS sur lesquelles elles se basent, le nécessitaient aussi.</p>
<div id="un-premier-exemple-de-reprojection" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Un premier exemple de reprojection<a href="les-reprojections.html#un-premier-exemple-de-reprojection" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Prenons les coordonnées de Nantes en WGS 84:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="les-reprojections.html#cb132-1" aria-hidden="true" tabindex="-1"></a>nantes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">1.553621</span>, <span class="at">lat =</span> <span class="fl">47.218371</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="les-reprojections.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="les-reprojections.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4326</span>)</span></code></pre></div>
<p>On peut visualiser nos données</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="les-reprojections.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(nantes)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-4cbef52bbddaaa4cc817" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4cbef52bbddaaa4cc817">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.218371,-1.553621,6,null,"nantes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.218371,-1.553621,47.218371,true,"nantes","Zoom to nantes","<strong> nantes <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"nantes",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes"}]}],"limits":{"lat":[47.218371,47.218371],"lng":[-1.553621,-1.553621]},"setView":[[47.218371,-1.553621],18,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p><code>st_is_longlat()</code> est une fonction de <code>sf</code> qui permet de faire un test sur la famille de CRS à laquelle on a affaire.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="les-reprojections.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_is_longlat</span>(nantes)</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Essayons de créer un buffer de 1 km autour de Nantes.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="les-reprojections.html#cb136-1" aria-hidden="true" tabindex="-1"></a>nantes_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(nantes, <span class="at">dist =</span> <span class="dv">1000</span>)</span>
<span id="cb136-2"><a href="les-reprojections.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(<span class="fu">list</span>(nantes, nantes_buffer))</span></code></pre></div>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-722d31479a37053fef76" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-722d31479a37053fef76">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.218371,-1.553621,6,null,"nantes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.218371,-1.553621,47.218371,true,"nantes","Zoom to nantes","<strong> nantes <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-1.54229036494346,-1.54229448244831,-1.54230271751182,-1.54246591688202,-1.54247415288785,-1.54263735370411,-1.54264559065227,-1.5428087929146,-1.54281703080511,-1.54297003426487,-1.54297054918643,-1.54298074943846,-1.54298847334639,-1.5431312778251,-1.54313230777948,-1.54315270846886,-1.54315991827615,-1.54330272402019,-1.54330375409237,-1.54332415496252,-1.54333136559442,-1.54349441425798,-1.54349442230644,-1.54349458168958,-1.54350281530122,-1.54366602479403,-1.54367426739659,-1.54383747833553,-1.54384572188054,-1.54400893426562,-1.54409054067397,-1.54409466312641,-1.54417626989629,-1.54418039258435,-1.54430280333544,-1.54430486484945,-1.5443456685595,-1.54435185329174,-1.54451506914462,-1.54452331638782,-1.54468653368687,-1.5447681425522,-1.54477226685376,-1.54485387608064,-1.54485800061784,-1.54502121993856,-1.54502946993758,-1.54519269070448,-1.54527430130374,-1.54527842698324,-1.54536003794405,-1.54536416385921,-1.54552738664779,-1.54553563940276,-1.54569886363756,-1.54586208844783,-1.54587034301619,-1.54603356927268,-1.54615598934271,-1.54615805337699,-1.54619886019336,-1.54620505248644,-1.54636828076464,-1.54649070235095,-1.54649276683859,-1.54653357416039,-1.54653976781357,-1.54670299811349,-1.54685602704231,-1.54685654328735,-1.54686674523732,-1.54687448899765,-1.54703772131929,-1.5472009542164,-1.54720921603872,-1.54737245038209,-1.54761730297614,-1.5476214350028,-1.54770305303959,-1.54770718530195,-1.54787042224252,-1.54803365975855,-1.54804192607893,-1.54836840457901,-1.54859285988304,-1.54859389354554,-1.54861429864073,-1.54861739967579,-1.54869902030977,-1.54870315525665,-1.54886639739161,-1.54902964010202,-1.54911126167302,-1.54911539772648,-1.54919701965905,-1.54920115594825,-1.54936440068041,-1.54969089187104,-1.54977251502835,-1.54977665285958,-1.54985827637847,-1.54986241444545,-1.55002566235024,-1.55018891083045,-1.5503521598861,-1.55051540951717,-1.55052368918878,-1.55068694026618,-1.55101344414724,-1.55133995032997,-1.55158483147748,-1.55158897417079,-1.5516706017254,-1.55167474465449,-1.55183800063072,-1.55200125718235,-1.55216451430939,-1.55232777201182,-1.55249103028966,-1.55265428914289,-1.55281754857151,-1.55298080857552,-1.55314406915491,-1.55330733030969,-1.55347059203985,-1.55363385434539,-1.5537971172263,-1.55396038068258,-1.55412364471423,-1.55428690932125,-1.55445017450363,-1.55461344026137,-1.55477670659446,-1.55493997350291,-1.55510324098671,-1.55526650904586,-1.55542977768035,-1.55559304689019,-1.55575631667536,-1.55591958703588,-1.55608285797172,-1.55607870328464,-1.55616033875057,-1.55615618386384,-1.55623781925585,-1.55656436226217,-1.55689090756977,-1.55721745517862,-1.55720913979798,-1.55737241359435,-1.55753568796603,-1.55769896291301,-1.55786223843528,-1.55802551453285,-1.55801719486962,-1.55818047067146,-1.55850702400098,-1.55867030152866,-1.55866197845387,-1.5588252556858,-1.55898853349301,-1.55915181187548,-1.55914348626016,-1.55947004300885,-1.55963332224608,-1.55962499409025,-1.55978827303171,-1.55995155254841,-1.56011483264036,-1.56010650194405,-1.56043306211161,-1.56042681283049,-1.5604676328499,-1.56046554971083,-1.56058800982146,-1.5607512904723,-1.56091457169836,-1.56090623679215,-1.56106951772241,-1.56123279922788,-1.56122446265227,-1.56138774386193,-1.5615510256468,-1.5615426874018,-1.56170596889085,-1.56186925095511,-1.56186091104074,-1.56202419280916,-1.56202002244372,-1.56210166332588,-1.56209749276086,-1.56234241561685,-1.56233511602858,-1.56235552622973,-1.56235448342234,-1.56249735498676,-1.56266063731389,-1.56265229326253,-1.56281557529383,-1.56281140285991,-1.56289304387349,-1.56288887124,-1.56297051217962,-1.56313379449024,-1.5631254479713,-1.56328872998607,-1.56328142607953,-1.56330183627655,-1.56330079285227,-1.56344366438779,-1.56343949032096,-1.56352113117836,-1.56351695691197,-1.5635985976954,-1.56376187969363,-1.56375352990892,-1.56391681161129,-1.56390846102836,-1.56407174243488,-1.56406443497239,-1.56408484509338,-1.5640838011611,-1.56422667216439,-1.56422040802304,-1.56426122822726,-1.56425914013481,-1.56438160079983,-1.56437742430196,-1.56445906470729,-1.56445488800986,-1.56453652834123,-1.56453235144426,-1.56461399170166,-1.56460981460515,-1.56469145478858,-1.56468727749253,-1.564768917602,-1.5647647401064,-1.56484638014191,-1.56484011360602,-1.56488093351439,-1.56487884462376,-1.56500130440121,-1.56499399274828,-1.56501440264737,-1.56501335811647,-1.5651562275665,-1.56514787059813,-1.56531114963779,-1.5653027918713,-1.5654660706151,-1.56545771205049,-1.56545353279549,-1.56553517172984,-1.56553099227532,-1.56561263113571,-1.56560479429931,-1.56561499911593,-1.56561447665905,-1.56576754912697,-1.565759189039,-1.56592246602429,-1.56591410513824,-1.56590580964361,-1.56590708523377,-1.56590701991515,-1.56606902014356,-1.5660606585323,-1.56605647775399,-1.56613811522572,-1.5661339342479,-1.56621557164566,-1.56620720930922,-1.56620302816832,-1.56628466505667,-1.56628048371626,-1.56636212053066,-1.56635375746905,-1.56634957596557,-1.56643121227056,-1.56642703056758,-1.56650866679861,-1.56650030301186,-1.56649193929797,-1.56665521044958,-1.56664684593771,-1.56663063990334,-1.56664084420952,-1.56664032143537,-1.56679338624667,-1.56678502108259,-1.56677665599138,-1.56676829097305,-1.56676410849122,-1.56684574173994,-1.56684155905862,-1.5669231922334,-1.5668646335602,-1.5670278942455,-1.56701952814152,-1.56701116211042,-1.5670027961522,-1.56699443026686,-1.56683117306452,-1.56678934908455,-1.56677262000264,-1.56669099466452,-1.56668681265725,-1.56660518768053,-1.56660100590915,-1.56659264242102,-1.56658427900574,-1.56657591566333,-1.56645348075321,-1.56645139009223,-1.56641057858181,-1.56639594446336,-1.56638758221012,-1.56623454161063,-1.56623401902323,-1.56622381633797,-1.56621597761218,-1.56620761637523,-1.56612599581735,-1.56612181544384,-1.56604019524734,-1.56603601510968,-1.56602765488898,-1.56594603548915,-1.56594185562375,-1.56586023658529,-1.56585605695574,-1.56584769775126,-1.56576607950945,-1.56576190015216,-1.56568028227172,-1.56567610315026,-1.56566774496196,-1.56550961199263,-1.56550935082677,-1.56550424977308,-1.56549615369312,-1.56548779652096,-1.56532456481306,-1.56531620858422,-1.56515807925874,-1.56515781815411,-1.56515271721796,-1.56514462303619,-1.5650630085558,-1.56505883115794,-1.5649772170389,-1.56497303987686,-1.56496468560736,-1.5648014591062,-1.56479310577995,-1.56462988072417,-1.56462152834116,-1.56445830473075,-1.56444995329095,-1.5643071338651,-1.56430609003545,-1.56428568730986,-1.56427838062931,-1.56413556246814,-1.56413451875638,-1.56411411621147,-1.56410681035619,-1.5639639934597,-1.56396294986584,-1.56394254750159,-1.56393524247158,-1.56378222574004,-1.56378170400532,-1.56377150291125,-1.56376367697544,-1.56360046059176,-1.56359211386774,-1.56342889892938,-1.56342055314846,-1.5632573396554,-1.56324899481757,-1.5630857827698,-1.5630041769615,-1.56300000522263,-1.56291839977566,-1.56291422827254,-1.56275101824497,-1.56274267616361,-1.5625794675813,-1.56257112644296,-1.56226511353262,-1.56226407109942,-1.56224367032419,-1.56223637341878,-1.56207316830191,-1.56206482991986,-1.56190162624823,-1.56173842315152,-1.56173008658274,-1.56156688493126,-1.56144448406994,-1.56144240031985,-1.561401600159,-1.56139534909914,-1.5612321494678,-1.56115054986773,-1.56114638316989,-1.56106478393112,-1.56106061746901,-1.5608974198578,-1.5608158212678,-1.56081165547654,-1.56073005724784,-1.56072589169228,-1.56056269610121,-1.56048109852127,-1.56047693363656,-1.56039533641792,-1.56039117176892,-1.56022797819797,-1.56006988497437,-1.56006962473795,-1.56006452496638,-1.56005645769885,-1.55989326614801,-1.55973007517211,-1.55972174948202,-1.55955855995129,-1.5593953709955,-1.55923218261465,-1.55922385960775,-1.55889748631132,-1.55873940007262,-1.55873914006056,-1.5587340405143,-1.55872598020173,-1.55856279586109,-1.55839961209539,-1.55823642890465,-1.55822811126391,-1.55790174834767,-1.55757538773127,-1.55756707364367,-1.55740389506808,-1.55724071706746,-1.5570775396418,-1.55691436279111,-1.55683277458139,-1.5568286195226,-1.55674703167415,-1.55674287685099,-1.5565797020204,-1.55625335408416,-1.55592700844784,-1.55591870320647,-1.55575553212092,-1.55559236161036,-1.55542919167479,-1.55526602231421,-1.55510285352863,-1.55493968531805,-1.55477651768248,-1.55461335062191,-1.55445018413634,-1.5542870182258,-1.55412385289026,-1.55396068812974,-1.55395239340193,-1.55329974359042,-1.55297342213483,-1.55281026226958,-1.55281855090687,-1.55265539074661,-1.55249223116138,-1.5523290721512,-1.55216591371608,-1.552002755856,-1.55183959857098,-1.55167644186102,-1.55151328572612,-1.55135013016629,-1.55118697518152,-1.55102382077182,-1.5508606669372,-1.55086894520602,-1.55070579107643,-1.55037948454251,-1.55005318030894,-1.5498900290548,-1.54989830217549,-1.54973515062641,-1.54957199965243,-1.54940884925356,-1.5492456994298,-1.54908255018115,-1.54909081902375,-1.54876452051175,-1.54860137211843,-1.5486055052617,-1.54852393106321,-1.54852806400698,-1.54844648973476,-1.54828334162168,-1.54812019408373,-1.54795704712092,-1.54796531001736,-1.54780216275967,-1.54747586996974,-1.54748413032809,-1.54732098392583,-1.54715783809872,-1.54716196743486,-1.54708039451949,-1.5470845236561,-1.54683980512022,-1.54667666014859,-1.54668491630071,-1.54652177103424,-1.54635862634294,-1.5463658490125,-1.54634545587137,-1.54634648767221,-1.54620373584079,-1.54604059142985,-1.54604678103498,-1.54600599485899,-1.54600805801531,-1.5458856995399,-1.54572255540931,-1.54572874376332,-1.54568795765742,-1.54569002039669,-1.54556766213156,-1.54540451828135,-1.54541173657196,-1.54539134353597,-1.54539237471123,-1.54524962361579,-1.54508648004597,-1.54509472785724,-1.54493158399261,-1.5447684407032,-1.54477668684624,-1.54461354326202,-1.54461972726391,-1.54457894129461,-1.54458100258317,-1.54429550142405,-1.54430374510062,-1.54414060150203,-1.54414678365405,-1.54410599768116,-1.5441080583531,-1.54398570048699,-1.54382255716885,-1.5438307983789,-1.54366765476597,-1.54367589517775,-1.54351275127004,-1.54351996092793,-1.54349956788475,-1.54350059782677,-1.54335784668103,-1.54336196607967,-1.54328039397663,-1.5432845131757,-1.54320294099896,-1.54320705999845,-1.54312548774801,-1.54312960654793,-1.5430480342238,-1.542884890007,-1.54289312635554,-1.54272998184396,-1.54273821739418,-1.54257507258782,-1.54258330733969,-1.54242016223856,-1.54242839619209,-1.54226525079617,-1.54227348395134,-1.54227760055582,-1.54219602742103,-1.54220014382592,-1.54211857061744,-1.54212268682273,-1.54204111354056,-1.54204522954625,-1.54196365619039,-1.54197085886282,-1.54195046545116,-1.54195149439525,-1.54180874067016,-1.54181697150188,-1.54165382405676,-1.54166205409006,-1.5416661691336,-1.5415845949742,-1.54158870981813,-1.54150713558504,-1.54151510772469,-1.54151000931356,-1.54151026647962,-1.54135221598681,-1.54136044449493,-1.54136455877587,-1.54128298388663,-1.54128709796796,-1.54120552300503,-1.54121375078637,-1.54105060042187,-1.54105882740474,-1.54106705445928,-1.54090390292985,-1.54092035551361,-1.54075720281923,-1.54076542834843,-1.54077365394929,-1.54061050008994,-1.54063517471189,-1.54047201881736,-1.54048024296444,-1.54048846718317,-1.54049669147354,-1.54050285973834,-1.54046207003879,-1.54046412608163,-1.54034175703559,-1.54034998059903,-1.54036642794083,-1.54038287556921,-1.54038698752108,-1.5403054059437,-1.54030951769592,-1.54022793604482,-1.54023615916785,-1.54024438236252,-1.54025260562883,-1.54026082896678,-1.54026905237637,-1.54027727585761,-1.54028549941049,-1.54029372303501,-1.5404161007874,-1.54041815686791,-1.54045894957837,-1.54046511800997,-1.54048156735794,-1.54049801699253,-1.54050624191732,-1.54065921959362,-1.5406597337048,-1.54066993223793,-1.54067764399018,-1.54068586992867,-1.54069409593883,-1.54070232202066,-1.54086550228375,-1.54087372930766,-1.54088195640326,-1.54096354762102,-1.54096766141331,-1.54104925299255,-1.54105336702037,-1.54106159512976,-1.54106982331084,-1.54123300907705,-1.54124946739521,-1.54141265547784,-1.54142088561494,-1.5415024803073,-1.54150659562036,-1.54158819067421,-1.54159230622282,-1.54160053737384,-1.54174333020679,-1.54174435920092,-1.54176475822663,-1.54177196131213,-1.54178019347709,-1.54194338763866,-1.54195162074587,-1.54209441687104,-1.5420954461097,-1.54211584560572,-1.54212305040293,-1.5422046488578,-1.54220876612708,-1.54229036494346],"lat":[47.2230373074666,47.2231135410259,47.2232660084825,47.2232638179272,47.2234162858123,47.2234140949948,47.2235665633082,47.2235643722286,47.2237168409704,47.2237147865946,47.2237243159046,47.2237241789386,47.2238671187988,47.2238652011586,47.2238842598341,47.2238839858701,47.2240173967935,47.2240154789238,47.2240345376529,47.2240342636562,47.2241676749543,47.224165484967,47.2241656338637,47.2241656317229,47.2243179532813,47.224315760891,47.2244682317746,47.2244660391221,47.2246185104339,47.2246163175193,47.224615220972,47.2246914567802,47.2246903601674,47.2247665960826,47.2247649510427,47.2248030690383,47.2248025206603,47.2249168748121,47.2249146811334,47.2250671537077,47.2250649597668,47.2250638627065,47.2251400991458,47.2251390020199,47.2252152385663,47.2252130441235,47.2253655175319,47.2253633228269,47.2253622253845,47.2254384622409,47.2254373647329,47.2255136016964,47.2255114064893,47.2256638807319,47.2256616852626,47.2256594895536,47.225811964202,47.2258097682307,47.225808121095,47.2258462398176,47.225845690741,47.2259600470738,47.2259578506006,47.2259562030884,47.2259943219125,47.2259937727103,47.2261081293474,47.2261059323722,47.2261038724902,47.2261134022186,47.2261132648856,47.2262562110228,47.2262540135455,47.2262518158284,47.2264042920997,47.2264020941203,47.2263987967018,47.2264750349783,47.2264739357132,47.2265501740968,47.2265479753756,47.2265457764147,47.2266982534748,47.2266938547884,47.2266908301352,47.2267098897899,47.2267096147986,47.2267667938038,47.2267656937969,47.2268419325636,47.2268397323586,47.2268375319138,47.2268364316015,47.2269126704527,47.2269115700748,47.226987809033,47.2269856080861,47.2269812054728,47.2269801046697,47.227056343701,47.2270552428322,47.2271314819707,47.2271292800419,47.2271270778734,47.2271248754651,47.2271226728169,47.2272751513415,47.2272729484309,47.2272685418903,47.2272641343904,47.2272608281359,47.2273370674938,47.2273359652834,47.2274122047482,47.2274100001363,47.2274077952844,47.2274055901928,47.2274033848613,47.2274011792899,47.2273989734787,47.2273967674276,47.2273945611368,47.227392354606,47.2273901478354,47.2273879408249,47.2273857335745,47.2273835260843,47.2273813183542,47.2273791103843,47.2273769021744,47.2273746937247,47.2273724850351,47.2273702761057,47.2273680669363,47.2273658575271,47.227363647878,47.227361437989,47.22735922786,47.2273570174912,47.2273548068825,47.2273525960339,47.2272763568749,47.2272752513663,47.2271990123257,47.2271979067628,47.2271934839115,47.2271890601005,47.2271846353299,47.2270321577343,47.2270299450118,47.2270277320494,47.2270255188471,47.2270233054048,47.2270210917227,47.2268686146914,47.226866400792,47.2268619722735,47.2268597576543,47.2267072811648,47.2267050663284,47.2267028512521,47.2267006359359,47.2265481599653,47.2265437286585,47.2265415126452,47.2263890371936,47.2263868209631,47.2263846044926,47.2263823877822,47.2262299128497,47.2262254787545,47.2261111228851,47.22611056856,47.2260724499947,47.2260707869336,47.2260685693089,47.2260663514442,47.2259138775271,47.2259116594452,47.2259094411234,47.2257569677027,47.2257547491636,47.2257525303847,47.2256000574602,47.2255978384641,47.225595619228,47.2254431467999,47.2254409273466,47.225364691313,47.225363581502,47.2252873455868,47.2252840158111,47.2251506032606,47.2251503257574,47.2251312668501,47.2251293242253,47.2251271038577,47.224974632896,47.2249724123112,47.2248961770108,47.2248950666341,47.224818831452,47.2248177210211,47.2248154999791,47.2246630299874,47.2246608087283,47.2245273978752,47.2245271202034,47.2245080615387,47.2245061177338,47.2244298831552,47.2244287723327,47.2243525378725,47.2243514269958,47.2243492050624,47.2241967365142,47.2241945143636,47.2240420462891,47.2240398239213,47.2239064147459,47.2239061369355,47.2238870785104,47.2238851337355,47.2237707833478,47.2237702276683,47.2237321109302,47.2237304438061,47.2236542104229,47.2236530989376,47.2235768656728,47.2235757541332,47.2234995209868,47.2234984093929,47.223422176365,47.2234210647167,47.2233448318072,47.2233437201047,47.2232674873136,47.2232663755568,47.2231520265899,47.2231514706933,47.2231133544288,47.2231116866533,47.2229782799644,47.2229780019912,47.2229589439213,47.2229569980063,47.2228045337208,47.2228023096158,47.2226498458039,47.2226476214817,47.2224951581435,47.2224189266435,47.2224178144095,47.2223415830279,47.2223404707397,47.2221975372136,47.2221973981747,47.2221878692871,47.2221857835923,47.2220333216522,47.2220310967015,47.221878635235,47.2217273653194,47.2217273479363,47.2217261568364,47.2217239490744,47.2215714885324,47.2214952584305,47.2214941457851,47.2214179158016,47.2214168031019,47.2212643434845,47.2211881138448,47.2211870011023,47.221110771581,47.2211096587842,47.2209572000912,47.2208809709138,47.2208798580741,47.2208036290151,47.2208025161212,47.2206500583527,47.2204976010351,47.2204953751129,47.2203429182689,47.2200475344167,47.2200473952928,47.2200378668097,47.2200357798399,47.2198833243713,47.2197308693535,47.2195784147865,47.2195021876721,47.2195010745753,47.2194248475793,47.2194237344282,47.218356568399,47.2183543420768,47.2182018916131,47.2180494416003,47.2178969920383,47.2177445429272,47.217746769158,47.2169845302509,47.216679637844,47.2166807507895,47.2166045279639,47.2166056408437,47.216529418125,47.2163769730259,47.2162245283776,47.2160720841802,47.2160737533275,47.2160356423443,47.2160361986954,47.2157694225921,47.2156169797244,47.2156190658483,47.2156095381827,47.2156096772501,47.2154667624761,47.2153143204874,47.2153154329703,47.2152392121393,47.2152403245565,47.2151641038325,47.2150116627226,47.2150127750627,47.2149365546712,47.2149376669456,47.2148614466611,47.2147090064301,47.2147101186275,47.2146338986754,47.2146350108071,47.214558790962,47.21440635161,47.2144085061613,47.2144037424382,47.214403811936,47.2142561367353,47.2141036982622,47.214105922026,47.2139534839809,47.2139556380013,47.2139508743189,47.2139509437997,47.213803269865,47.2138043815143,47.2137281628691,47.2137292744527,47.2136530559146,47.2135006191766,47.2135028421296,47.2133504058196,47.21335262851,47.2132001926281,47.2132024150558,47.213049979602,47.2130519240096,47.2130328696071,47.2130331473643,47.2128997667414,47.2129017109193,47.2128826565702,47.2128829342946,47.2127495540463,47.2127514979944,47.2127324436989,47.2127327213904,47.2125993415167,47.2126014240649,47.212591896943,47.2125920357719,47.2124491291525,47.2124513502673,47.2122989169539,47.2123011378061,47.2121487049208,47.2121509255104,47.2119984930532,47.2120007133803,47.2120018234539,47.2119256073773,47.2119267173852,47.2118505014157,47.2118527212404,47.2117002896167,47.2117025091788,47.2115500779832,47.2115542389733,47.2115351851002,47.2115354624693,47.2114020855525,47.2114043043498,47.2112518739877,47.2112540925225,47.2112563108176,47.2111038808608,47.2111060988934,47.2111077622605,47.2110696548318,47.2110702092561,47.2109558871349,47.2109581046652,47.2109592133405,47.2108829987168,47.2108841073265,47.2108078928098,47.210810109838,47.2108112182621,47.2107350038412,47.2107361121997,47.2106598978858,47.2106621144117,47.2106632225848,47.2105870083666,47.210588116474,47.2105119023628,47.2105141183866,47.210516264931,47.2105115015514,47.210511570791,47.2103639062409,47.2103661217626,47.2103683370445,47.2102159095202,47.2102181245397,47.2102203393195,47.2102225538596,47.2100701267181,47.2100745550337,47.2100766996545,47.2100719363115,47.210072005489,47.2099243420733,47.2099265556092,47.2099287689054,47.209930981962,47.209778555586,47.2097829809348,47.2097874053249,47.209634979309,47.2096371911218,47.209639402695,47.2096416140286,47.2096438251225,47.2096449305796,47.2095687176897,47.2095698230812,47.2094936102983,47.2094958208903,47.2095002413552,47.2095046608617,47.2093522355207,47.2093544448918,47.2093566540233,47.2093588629152,47.2093610715674,47.20936327998,47.2093654881531,47.2093676960865,47.2093699037802,47.2093721112344,47.209374318449,47.209376525424,47.2093787321594,47.2092263069975,47.2092351314525,47.2092395422425,47.2092417472782,47.2093941725985,47.2093963774172,47.2093985819963,47.2094007863358,47.2094029904358,47.2094051942962,47.209407397917,47.2094096012983,47.20941180444,47.2094140073421,47.2094162100047,47.2094184124277,47.2094206146112,47.2095730406538,47.2095752426204,47.2095796458348,47.209584048091,47.2095862488598,47.2097386754889,47.2097408760407,47.209743076353,47.2097452764258,47.2097474762591,47.2097496758528,47.2099021030457,47.2099065015597,47.2099087004574,47.2099849142568,47.2099860136214,47.2100622275392,47.2100633268496,47.2100655252909,47.2100677234926,47.2100699214548,47.2102223497075,47.2102245474527,47.2102289422246,47.2103813709959,47.2103835680451,47.2103857648548,47.2104619794321,47.2104630777528,47.2105392924484,47.2105425870681,47.2105447831819,47.2106972129677,47.2106994088645,47.2107016045218,47.2108349809937,47.2108352554365,47.2108543092467,47.2108562302439,47.2108584254447,47.2109727484858,47.2109732972528,47.211011404991,47.2110130512064,47.2110152459507,47.2111295693638,47.2111301180167,47.2111682258788,47.2111698717519,47.2111720660397,47.2113054438136,47.2113057180852,47.2113247720815,47.2113266918804,47.2113288857118,47.2114813179775,47.2114835115919,47.2114857049668,47.2116381377285,47.2116403308864,47.2117546557705,47.2117552040268,47.2117933123792,47.211797149764,47.211949583495,47.2119517759795,47.2120661015906,47.2120666496785,47.2121047582733,47.2121064024514,47.2121085944794,47.2122610291798,47.2122632209908,47.2124156561647,47.2124178477587,47.2125512289253,47.2125515028602,47.2125705573411,47.2125724747829,47.2126486927869,47.2126497883912,47.2127260065135,47.2127271020636,47.2128033203042,47.2128044158,47.212880634159,47.2128817296006,47.2128839203042,47.2130363573941,47.2130385478806,47.213190985444,47.2131931757135,47.2133456137502,47.2133478038027,47.2135002423128,47.2135024321484,47.2136548711319,47.2137310907927,47.2137321856375,47.2138084054167,47.2138095002073,47.2138857201048,47.2138868148411,47.213963034857,47.213964129539,47.2140975148479,47.2140977885115,47.2141168435842,47.2141187591272,47.2142711999817,47.2142733889717,47.2144258302996,47.2145020511327,47.2145031455547,47.2145793665061,47.2145804608738,47.2147281392989,47.2147282076955,47.2147329715228,47.2147350917044,47.21488753443,47.2149637559619,47.2149648501781,47.2150410718284,47.2150421659903,47.2151946096402,47.2151967978069,47.2153492419302,47.2155016865043,47.2155038744765,47.2158087650224,47.2158109528,47.2159633987718,47.2161158451944,47.2161180327774,47.2165753748182,47.216577562229,47.2167300105002,47.2168824592223,47.2170349083953,47.2171492455709,47.2171497924072,47.2171879048569,47.2171895452802,47.2173419953775,47.2176468969246,47.2179518002753,47.2180280263948,47.2180291199972,47.218105346235,47.2181064397832,47.2182588926082,47.2184113458841,47.2185637996109,47.2187162537886,47.2188687084172,47.2190211634966,47.219173619027,47.2193260750082,47.2193244345288,47.2193625485903,47.2193620017325,47.219476344082,47.219781258254,47.2200861742294,47.2202386328935,47.2202365819223,47.2202461106024,47.2202459738634,47.2203889042759,47.2205413638192,47.2206938238134,47.2208462842585,47.220844096219,47.2209965570925,47.2211490184169,47.2211479242849,47.2212241551105,47.221223060913,47.2212992918458,47.2214517540494,47.2216042167039,47.221602028073,47.2219069546897,47.2219047657743,47.2220572297365,47.2220561351777,47.2221323673223,47.222131272698,47.2222075049496,47.222359969791,47.2223580540249,47.2223771121593,47.2223768384631,47.2225102455988,47.2226627113195,47.222660521573,47.222812987722,47.2228110714776,47.2228301297754,47.2228298560109,47.2229632642908,47.2229621691854,47.2230384026376,47.2230373074666]}]]],null,"nantes_buffer",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addHomeButton","args":[-1.5670278942455,47.2092263069975,-1.54022793604482,47.2274122047482,true,"nantes_buffer","Zoom to nantes_buffer","<strong> nantes_buffer <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["nantes","nantes_buffer"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_buffer"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_buffer"}]},{"method":"addHomeButton","args":[-1.5670278942455,47.2092263069975,-1.54022793604482,47.2274122047482,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[47.218371,47.218371],"lng":[-1.553621,-1.553621]},"fitBounds":[47.2092263069975,-1.5670278942455,47.2274122047482,-1.54022793604482,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Le buffer est pixelisé en longitude / latitude.</p>
<p>Tentons une reprojection. La fonction permettant une reprojection est <code>st_transform()</code>.
On va ici passer en Lambert 93 nos données.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="les-reprojections.html#cb137-1" aria-hidden="true" tabindex="-1"></a>nantes_proj <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nantes, <span class="dv">2154</span>)</span></code></pre></div>
<p>Le CRS lambert 93 est bien un CRS projeté :</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="les-reprojections.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_is_longlat</span>(nantes_proj)</span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="les-reprojections.html#cb140-1" aria-hidden="true" tabindex="-1"></a>nantes_proj_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(nantes_proj, <span class="at">dist =</span> <span class="dv">1000</span>)</span>
<span id="cb140-2"><a href="les-reprojections.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(<span class="fu">list</span>(nantes_proj, nantes_proj_buffer))</span></code></pre></div>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-bbf918b1b533c76ebfe6" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-bbf918b1b533c76ebfe6">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.2183709999823,-1.553621,6,null,"nantes_proj",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.2183709999823,-1.553621,47.2183709999823,true,"nantes_proj","Zoom to nantes_proj","<strong> nantes_proj <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_proj"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_proj"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-1.54042918948801,-1.54040752546622,-1.54042207875339,-1.54047280851012,-1.54055957474925,-1.54068213872982,-1.54084016362157,-1.5410332154379,-1.54126076423473,-1.54152218557184,-1.54181676223256,-1.54214368619702,-1.54250206086357,-1.54289090351198,-1.54330914800191,-1.54375564769886,-1.54422917861989,-1.54472844279015,-1.54525207180121,-1.54579863056131,-1.54636662122736,-1.54695448730778,-1.54756061792515,-1.54818335222684,-1.54882098393176,-1.54947176600064,-1.5501339154173,-1.55080561806773,-1.5514850337038,-1.552170300978,-1.55285954253565,-1.55355087015048,-1.55424238988998,-1.55493220729606,-1.55561843256727,-1.55629918572832,-1.55697260177289,-1.5576368357657,-1.55829006789004,-1.55893050842701,-1.55955640265277,-1.56016603564077,-1.56075773695555,-1.56132988522555,-1.56188091258232,-1.56240930895414,-1.56291362620218,-1.56339248208801,-1.56384456406158,-1.56426863285925,-1.56466352590199,-1.56502816048458,-1.56536153674679,-1.5656627404186,-1.56593094533166,-1.56616541569027,-1.56636550809538,-1.56653067331616,-1.56666045780405,-1.56675450494512,-1.56681255604721,-1.56683445105901,-1.56682012901904,-1.5667696282331,-1.56668308617973,-1.56656073914363,-1.5664029215782,-1.56621006519851,-1.5659826978074,-1.56572144185757,-1.56542701275368,-1.56510021689892,-1.56474194949136,-1.56435319207606,-1.56393500985956,-1.56348854879404,-1.56301503243921,-1.56251575861033,-1.56199209582165,-1.56144547953498,-1.56087740822372,-1.56028943926299,-1.5596831846574,-1.55906030661801,-1.55842251300075,-1.55777155261881,-1.55710921044203,-1.55643730269633,-1.5557576718769,-1.55507218168884,-1.55438271192915,-1.5536911533243,-1.55299940233758,-1.55230935596069,-1.55162290650372,-1.55094193639817,-1.55026831302729,-1.54960388359783,-1.54895047006777,-1.54830986414353,-1.54768382236094,-1.54707406126324,-1.54648225268948,-1.54591001918637,-1.54535892955619,-1.54483049455294,-1.54432616273872,-1.54384731651152,-1.54339526831559,-1.5429712570445,-1.54257644464698,-1.54221191294471,-1.54187866067072,-1.5415776007366,-1.54130955773589,-1.54107526569034,-1.54087536604534,-1.54071040591982,-1.54058083661528,-1.54048701238806,-1.54042918948801],"lat":[47.2188891302924,47.2184180354471,47.2179468136561,47.2174767564923,47.2170091523034,47.2165452826811,47.2160864189492,47.2156338186803,47.2151887222504,47.2147523494408,47.2143258960973,47.2139105308545,47.2135073919357,47.2131175840355,47.2127421752955,47.2123821943797,47.212038627658,47.2117124165067,47.2114044547309,47.211115586119,47.2108466021326,47.210598239741,47.2103711794043,47.2101660432113,47.2099833931777,47.2098237297081,47.2096874902267,47.2095750479811,47.2094867110208,47.2094227213545,47.2093832542882,47.2093684179453,47.2093782529715,47.2094127324226,47.2094717618394,47.2095551795049,47.2096627568877,47.2097941992665,47.2099491465366,47.2101271741953,47.2103277945029,47.2105504578172,47.2107945540977,47.2110594145742,47.2113443135774,47.2116484705242,47.2119710520542,47.2123111743102,47.2126679053575,47.2130402677348,47.2134272411297,47.2138277651723,47.2142407423381,47.2146650409532,47.215099498293,47.2155429237667,47.2159941021783,47.2164517970546,47.2169147540327,47.2173817042965,47.2178513680533,47.2183224580404,47.2187936830528,47.2192637514824,47.2197313748581,47.220195271378,47.2206541694235,47.2211068110462,47.2215519554169,47.221988382229,47.2224148950451,47.2228303245791,47.2232335319033,47.2236234115735,47.2239988946618,47.2243589516897,47.2247025954534,47.2250288837325,47.2253369218767,47.2256258652612,47.225894921605,47.2261433531461,47.2263704786667,47.2265756753638,47.2267583805589,47.2269180932431,47.2270543754529,47.2271668534725,47.2272552188606,47.2273192292969,47.227358709248,47.227373550449,47.2273637122015,47.2273292214845,47.2272701728809,47.2271867283178,47.2270791166214,47.2269476328889,47.226792637678,47.2266145560168,47.2264138762365,47.226191148631,47.2259469839452,47.2256820516987,47.2253970783471,47.2250928452882,47.2247701867162,47.2244299873325,47.2240731799166,47.2237007427668,47.2233136970145,47.2229131038224,47.2225000614727,47.2220757023535,47.2216411898522,47.2211977151639,47.220746494024,47.2202887633737,47.2198257779678,47.2193588069339,47.2188891302924]}]]],null,"nantes_proj_buffer",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addHomeButton","args":[-1.56683445105901,47.2093684179453,-1.54040752546622,47.227373550449,true,"nantes_proj_buffer","Zoom to nantes_proj_buffer","<strong> nantes_proj_buffer <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["nantes_proj","nantes_proj_buffer"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_proj_buffer"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_proj_buffer"}]},{"method":"addHomeButton","args":[-1.56683445105901,47.2093684179453,-1.54040752546622,47.227373550449,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[47.2183709999823,47.2183709999823],"lng":[-1.553621,-1.553621]},"fitBounds":[47.2093684179453,-1.56683445105901,47.227373550449,-1.54040752546622,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Les contours du buffer sont cette fois plus nets, également les mesures de surfaces sont plus précises en utilisant un crs projeté, adapté à la zone observée.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="les-reprojections.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_area</span>(nantes_buffer)</span></code></pre></div>
<pre><code>3185131 [m^2]</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="les-reprojections.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_area</span>(nantes_proj_buffer)</span></code></pre></div>
<pre><code>3140157 [m^2]</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="les-reprojections.html#cb145-1" aria-hidden="true" tabindex="-1"></a>pi<span class="sc">*</span><span class="dv">1000</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 3141593</code></pre>
</div>
<div id="quand-reprojeter" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Quand reprojeter ?<a href="les-reprojections.html#quand-reprojeter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Quelques cas usuels qui peuvent vous amener à reprojeter vos données :</p>
<ul>
<li><p>la manipulation de données fournies dans des CRS différents</p></li>
<li><p>l’usage du package leaflet impose des données spécifiées en WGS 84</p></li>
<li><p>le besoin de visualiser vos données suivant la conversion de certaines propriétés des objets à la surface de la terre.</p></li>
<li><p>l’usage de fonctions recommandant d’utiliser des CRS projetés (comme <code>st_buffer()</code>, <code>st_area()</code> ci-dessus)</p></li>
</ul>
<p>Un exemple d’usage : la distance de Rennes à Nantes</p>
<p>Prenons les coordonnées WGS 84 de Rennes</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="les-reprojections.html#cb147-1" aria-hidden="true" tabindex="-1"></a>rennes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">1.6777926</span>, <span class="at">lat =</span> <span class="fl">48.117266</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="les-reprojections.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb147-3"><a href="les-reprojections.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4326</span>)</span></code></pre></div>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="les-reprojections.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(rennes)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-f25b83c300d4a81ebb62" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f25b83c300d4a81ebb62">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[48.117266,-1.6777926,6,null,"rennes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.6777926,48.117266,-1.6777926,48.117266,true,"rennes","Zoom to rennes","<strong> rennes <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"rennes",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["rennes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"rennes"}]}],"limits":{"lat":[48.117266,48.117266],"lng":[-1.6777926,-1.6777926]},"setView":[[48.117266,-1.6777926],18,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Tentons de calculer la distance de Rennes à Nantes.
Avec la données en Lambert 93, la fonction <code>st_distance()</code> renvoie un message d’erreur.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="les-reprojections.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes, nantes_proj)</span></code></pre></div>
<pre><code>Error in st_distance(rennes, nantes_proj): st_crs(x) == st_crs(y) is not TRUE</code></pre>
<p>Avec la données en WGS 84, la fonction <code>st_distance()</code> renvoie bien un résultat.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="les-reprojections.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes, nantes)</span></code></pre></div>
<pre><code>Units: [m]
         [,1]
[1,] 100384.2</code></pre>
<p>Avec la données en Lambert 93, la fonction <code>st_distance()</code> renvoie un résultat plus précis :</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="les-reprojections.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="dv">2154</span>), nantes_proj)</span></code></pre></div>
<pre><code>Units: [m]
         [,1]
[1,] 100302.7</code></pre>
</div>
<div id="quel-crs-utiliser" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Quel CRS utiliser ?<a href="les-reprojections.html#quel-crs-utiliser" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A cette question, il y a rarement une seule bonne réponse.</p>
<p>En ce qui concerne les CRS géométriques, le plus simple est d’utiliser le WGS 84 (EPSG 4326), qui est de loin le plus populaire, avec lequel beaucoup de données sont fournies.</p>
<p>En ce qui concerne les CRS projetés, il existe des CRS officiels à utiliser préférentiellement pour les données françaises.
En métropole, on utilise le Lambert 93 (EPSG 2154).
Pour les DROM, on utilise les CRS :</p>
<ul>
<li>RGAF09 / UTM zone 20N, code EPSG 5490, pour les Antilles françaises,<br />
</li>
<li>RGFG95 / UTM zone 22N, code EPSG 2972, pour la Guyane,</li>
<li>RGR92 / UTM zone 40S, code EPSG 2975, pour la Réunion,</li>
<li>RGM04 / UTM zone 38S, code EPSG 4471, pour Mayotte.</li>
</ul>
<p>Ensuite votre choix va dépendre des propriétés que vous souhaitez conserver.</p>
</div>
<div id="comment-projeter" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Comment projeter ?<a href="les-reprojections.html#comment-projeter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="projeter-des-vecteurs" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Projeter des vecteurs<a href="les-reprojections.html#projeter-des-vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reprojeter des données vecteur se fait à l’aide de la fonction <code>st_transform()</code>, que nous avons vue précédemment.</p>
</div>
<div id="modifier-la-projection-dune-carte." class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Modifier la projection d’une carte.<a href="les-reprojections.html#modifier-la-projection-dune-carte." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parfois on souhaite pouvoir aller plus loin dans les reprojections, en adaptant le centre de la projection, pour cela on peut utiliser une <code>proj4string</code> ad hoc.</p>
<p>Pour cela, on va modifier l’argument <code>+proj</code> de notre crs avec <code>st_transform</code>.</p>
<p>Tentons par exemple de reprojeter notre carte du globe en utilisant la projection azimutale équivalente de Lambert, centrée sur Pékin.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="les-reprojections.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;World&quot;</span>)</span>
<span id="cb155-2"><a href="les-reprojections.html#cb155-2" aria-hidden="true" tabindex="-1"></a>World_pekin <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(World, <span class="at">crs =</span> <span class="st">&quot;+proj=laea +x_0=0 +y_0=0 +lon_0=116 +lat_0=40&quot;</span>)</span></code></pre></div>
<p>Le paramètre <code>+proj=laea</code> permet de redéfinir la projection, les paramètres <code>+lon_0</code> et <code>lat_0</code> permettent de définir le centre de la projection. <code>x_0</code> et <code>y_0</code> définissent le centre du plan pour les coordonnées.</p>
<p>Qu’est ce qui a changé entre nos deux cartes ?</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="les-reprojections.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(World)</span></code></pre></div>
<pre><code>Coordinate Reference System:
  User input: EPSG:4326 
  wkt:
GEOGCRS[&quot;WGS 84&quot;,
    DATUM[&quot;World Geodetic System 1984&quot;,
        ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
            LENGTHUNIT[&quot;metre&quot;,1]]],
    PRIMEM[&quot;Greenwich&quot;,0,
        ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS[&quot;geodetic latitude (Lat)&quot;,north,
            ORDER[1],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        AXIS[&quot;geodetic longitude (Lon)&quot;,east,
            ORDER[2],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    USAGE[
        SCOPE[&quot;unknown&quot;],
        AREA[&quot;World&quot;],
        BBOX[-90,-180,90,180]],
    ID[&quot;EPSG&quot;,4326]]</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="les-reprojections.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(World_pekin)</span></code></pre></div>
<pre><code>Coordinate Reference System:
  User input: +proj=laea +x_0=0 +y_0=0 +lon_0=116 +lat_0=40 
  wkt:
PROJCRS[&quot;unknown&quot;,
    BASEGEOGCRS[&quot;unknown&quot;,
        DATUM[&quot;World Geodetic System 1984&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]],
            ID[&quot;EPSG&quot;,6326]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8901]]],
    CONVERSION[&quot;unknown&quot;,
        METHOD[&quot;Lambert Azimuthal Equal Area&quot;,
            ID[&quot;EPSG&quot;,9820]],
        PARAMETER[&quot;Latitude of natural origin&quot;,40,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,116,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;False easting&quot;,0,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,0,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;(E)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]],
        AXIS[&quot;(N)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]]]</code></pre>
<p><img src="support_m7_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="operations-geometriques.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geocodage.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"pandoc_args": ["-M", "toc-title=Table des matières"]
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

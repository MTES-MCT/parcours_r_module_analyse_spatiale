<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 8 Les reprojections | Analyses spatiales avec R</title>
  <meta name="description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 8 Les reprojections | Analyses spatiales avec R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 8 Les reprojections | Analyses spatiales avec R" />
  
  <meta name="twitter:description" content="Support de cours du module 7 « Analyse spatiale » de la valise pédagogique Parcours-r MTES/MCTRCT" />
  

<meta name="author" content="Maël THEULIERE, Jean-Daniel LOMENEDE, Juliette ENGELAERE-LEFEBVRE" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="operations-geometriques.html"/>
<link rel="next" href="geocodage.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/d3-bundle-5.16.0/d3-bundle.min.js"></script>
<script src="libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<script src="libs/save-svg-as-png-1.4.17/save-svg-as-png.min.js"></script>
<script src="libs/flatbush-4.4.0/flatbush.min.js"></script>
<link href="libs/ggiraphjs-0.8.10/ggiraphjs.min.css" rel="stylesheet" />
<script src="libs/ggiraphjs-0.8.10/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding-0.8.11/girafe.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><p style="text-align:center;"><img src="https://mtes-mct.github.io/parcours-r/assets/images/logo_marianne_fond_blanc.png" style="width:100px;"/></p></li>
<li><a href="./index.html">Les données spatiales avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#le-parcours-de-formation"><i class="fa fa-check"></i>Le parcours de formation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#le-groupe-de-référents-r-du-pôle-ministériel"><i class="fa fa-check"></i>Le groupe de référents R du pôle ministériel</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectifs-de-ce-module"><i class="fa fa-check"></i>Objectifs de ce module</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i><b>1</b> Bien commencer</a>
<ul>
<li class="chapter" data-level="1.1" data-path="get-started.html"><a href="get-started.html#créer-un-projet-sous-rstudio-pour-vous-permettre-de-recenser-vos-travaux."><i class="fa fa-check"></i><b>1.1</b> Créer un projet sous Rstudio pour vous permettre de recenser vos travaux.</a></li>
<li class="chapter" data-level="1.2" data-path="get-started.html"><a href="get-started.html#utilisation-du-package-savoirfr"><i class="fa fa-check"></i><b>1.2</b> Utilisation du package <code>{savoirfR}</code></a></li>
<li class="chapter" data-level="1.3" data-path="get-started.html"><a href="get-started.html#créer-votre-arborescence-de-projet"><i class="fa fa-check"></i><b>1.3</b> Créer votre arborescence de projet</a></li>
<li class="chapter" data-level="1.4" data-path="get-started.html"><a href="get-started.html#activer-les-packages-nécessaires"><i class="fa fa-check"></i><b>1.4</b> Activer les packages nécessaires</a></li>
<li class="chapter" data-level="1.5" data-path="get-started.html"><a href="get-started.html#bien-structurer-ses-projets-data"><i class="fa fa-check"></i><b>1.5</b> Bien structurer ses projets data</a></li>
</ul></li>
<li class="part"><span><b>I Introduction aux données spatiales</b></span></li>
<li class="chapter" data-level="2" data-path="modelisation.html"><a href="modelisation.html"><i class="fa fa-check"></i><b>2</b> La modélisation des données spatiales</a>
<ul>
<li class="chapter" data-level="2.1" data-path="modelisation.html"><a href="modelisation.html#les-données-vecteur"><i class="fa fa-check"></i><b>2.1</b> Les données vecteur</a></li>
<li class="chapter" data-level="2.2" data-path="modelisation.html"><a href="modelisation.html#les-données-raster"><i class="fa fa-check"></i><b>2.2</b> Les données raster</a></li>
<li class="chapter" data-level="2.3" data-path="modelisation.html"><a href="modelisation.html#la-structuration-des-données-géographiques-avec-r"><i class="fa fa-check"></i><b>2.3</b> La structuration des données géographiques avec R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="modelisation.html"><a href="modelisation.html#sf-pour-les-données-vecteur"><i class="fa fa-check"></i><b>2.3.1</b> <code>{sf}</code> pour les données vecteur</a></li>
<li class="chapter" data-level="2.3.2" data-path="modelisation.html"><a href="modelisation.html#terra-raster-et-stars-pour-les-données-raster"><i class="fa fa-check"></i><b>2.3.2</b> {terra}, {raster} et {stars} pour les données raster</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="modelisation.html"><a href="modelisation.html#format-des-objets-spatiaux-sf"><i class="fa fa-check"></i><b>2.4</b> Format des objets spatiaux <code>sf</code></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="crs.html"><a href="crs.html"><i class="fa fa-check"></i><b>3</b> Les Systèmes de Coordonnées de Référence</a>
<ul>
<li class="chapter" data-level="3.1" data-path="crs.html"><a href="crs.html#le-système-géodésique-ou-datum"><i class="fa fa-check"></i><b>3.1</b> Le système géodésique ou datum</a></li>
<li class="chapter" data-level="3.2" data-path="crs.html"><a href="crs.html#les-coordonnées"><i class="fa fa-check"></i><b>3.2</b> Les coordonnées</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="crs.html"><a href="crs.html#coordonnées-géographiques"><i class="fa fa-check"></i><b>3.2.1</b> Coordonnées géographiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="crs.html"><a href="crs.html#coordonnées-en-projection"><i class="fa fa-check"></i><b>3.2.2</b> Coordonnées en projection</a></li>
<li class="chapter" data-level="3.2.3" data-path="crs.html"><a href="crs.html#exemple-de-projections"><i class="fa fa-check"></i><b>3.2.3</b> Exemple de projections</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="crs.html"><a href="crs.html#code-epsg"><i class="fa fa-check"></i><b>3.3</b> Code EPSG</a></li>
</ul></li>
<li class="part"><span><b>II Lire et écrire des données spatiales</b></span></li>
<li class="chapter" data-level="4" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html"><i class="fa fa-check"></i><b>4</b> Lire et écrire des données spatiales avec R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-fichiers-plats"><i class="fa fa-check"></i><b>4.1</b> Lire des fichiers plats</a></li>
<li class="chapter" data-level="4.2" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#ecrire-des-fichiers-plats"><i class="fa fa-check"></i><b>4.2</b> Ecrire des fichiers plats</a></li>
<li class="chapter" data-level="4.3" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-spatiales-du-web"><i class="fa fa-check"></i><b>4.3</b> Lire des données spatiales du web</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-geojson"><i class="fa fa-check"></i><b>4.3.1</b> Lire des données geojson</a></li>
<li class="chapter" data-level="4.3.2" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#exemple-3-geojson-compressé"><i class="fa fa-check"></i><b>4.3.2</b> Exemple 3 (geojson compressé)</a></li>
<li class="chapter" data-level="4.3.3" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lire-des-données-wfs"><i class="fa fa-check"></i><b>4.3.3</b> Lire des données WFS</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#lireécrire-des-données-spatiales-sur-postgis"><i class="fa fa-check"></i><b>4.4</b> Lire/écrire des données spatiales sur PostGIS</a></li>
<li class="chapter" data-level="4.5" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#convertir-un-dataframe"><i class="fa fa-check"></i><b>4.5</b> Convertir un dataframe</a></li>
<li class="chapter" data-level="4.6" data-path="lire-des-donnees-spatiales.html"><a href="lire-des-donnees-spatiales.html#données-contenues-dans-des-packages"><i class="fa fa-check"></i><b>4.6</b> Données contenues dans des packages</a></li>
</ul></li>
<li class="part"><span><b>III Manipuler des données spatiales</b></span></li>
<li class="chapter" data-level="5" data-path="operation-sur-donnees-attributaires.html"><a href="operation-sur-donnees-attributaires.html"><i class="fa fa-check"></i><b>5</b> Les opérations sur données attributaires</a></li>
<li class="chapter" data-level="6" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html"><i class="fa fa-check"></i><b>6</b> Les opérations spatiales sur les données</a>
<ul>
<li class="chapter" data-level="6.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#filtrer"><i class="fa fa-check"></i><b>6.1</b> Filtrer</a></li>
<li class="chapter" data-level="6.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#prédicats-spatiaux"><i class="fa fa-check"></i><b>6.2</b> Prédicats spatiaux</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#exercice-1---manipuler-des-objets-sf"><i class="fa fa-check"></i><b>6.2.1</b> Exercice 1 - manipuler des objets sf</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#les-jointures-spatiales"><i class="fa fa-check"></i><b>6.3</b> Les jointures spatiales</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#jointure-de-points-avec-des-polygones"><i class="fa fa-check"></i><b>6.3.1</b> Jointure de points avec des polygones</a></li>
<li class="chapter" data-level="6.3.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#jointure-de-polygones-avec-des-polygones"><i class="fa fa-check"></i><b>6.3.2</b> Jointure de polygones avec des polygones</a></li>
<li class="chapter" data-level="6.3.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#exercice-2-exploitation-des-données-dvf-en-api"><i class="fa fa-check"></i><b>6.3.3</b> Exercice 2 : exploitation des données DVF en API</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#les-mesures"><i class="fa fa-check"></i><b>6.4</b> Les mesures</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#calcul-de-surface"><i class="fa fa-check"></i><b>6.4.1</b> Calcul de surface</a></li>
<li class="chapter" data-level="6.4.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#matrice-de-distances"><i class="fa fa-check"></i><b>6.4.2</b> Matrice de distances</a></li>
<li class="chapter" data-level="6.4.3" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#identification-du-plus-proche-voisin"><i class="fa fa-check"></i><b>6.4.3</b> Identification du plus proche voisin</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#carroyage"><i class="fa fa-check"></i><b>6.5</b> Carroyage</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#créer-une-grille-régulière"><i class="fa fa-check"></i><b>6.5.1</b> Créer une grille régulière</a></li>
<li class="chapter" data-level="6.5.2" data-path="les-operations-sur-donnees-spatiales.html"><a href="les-operations-sur-donnees-spatiales.html#compter-des-points-dans-un-polygone"><i class="fa fa-check"></i><b>6.5.2</b> Compter des points dans un polygone</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="operations-geometriques.html"><a href="operations-geometriques.html"><i class="fa fa-check"></i><b>7</b> Les opérations géométriques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#opérations-unaires"><i class="fa fa-check"></i><b>7.1</b> Opérations unaires</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#simplification"><i class="fa fa-check"></i><b>7.1.1</b> Simplification</a></li>
<li class="chapter" data-level="7.1.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#centroïde"><i class="fa fa-check"></i><b>7.1.2</b> Centroïde</a></li>
<li class="chapter" data-level="7.1.3" data-path="operations-geometriques.html"><a href="operations-geometriques.html#buffer"><i class="fa fa-check"></i><b>7.1.3</b> Buffer</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#opérations-binaires"><i class="fa fa-check"></i><b>7.2</b> Opérations binaires</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="operations-geometriques.html"><a href="operations-geometriques.html#transformation-affine"><i class="fa fa-check"></i><b>7.2.1</b> Transformation affine</a></li>
<li class="chapter" data-level="7.2.2" data-path="operations-geometriques.html"><a href="operations-geometriques.html#découpage"><i class="fa fa-check"></i><b>7.2.2</b> Découpage</a></li>
<li class="chapter" data-level="7.2.3" data-path="operations-geometriques.html"><a href="operations-geometriques.html#union"><i class="fa fa-check"></i><b>7.2.3</b> Union</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="les-reprojections.html"><a href="les-reprojections.html"><i class="fa fa-check"></i><b>8</b> Les reprojections</a>
<ul>
<li class="chapter" data-level="8.1" data-path="les-reprojections.html"><a href="les-reprojections.html#un-premier-exemple-de-reprojection"><i class="fa fa-check"></i><b>8.1</b> Un premier exemple de reprojection</a></li>
<li class="chapter" data-level="8.2" data-path="les-reprojections.html"><a href="les-reprojections.html#quand-reprojeter"><i class="fa fa-check"></i><b>8.2</b> Quand reprojeter ?</a></li>
<li class="chapter" data-level="8.3" data-path="les-reprojections.html"><a href="les-reprojections.html#quel-crs-utiliser"><i class="fa fa-check"></i><b>8.3</b> Quel CRS utiliser ?</a></li>
<li class="chapter" data-level="8.4" data-path="les-reprojections.html"><a href="les-reprojections.html#comment-projeter"><i class="fa fa-check"></i><b>8.4</b> Comment projeter ?</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="les-reprojections.html"><a href="les-reprojections.html#projeter-des-vecteurs"><i class="fa fa-check"></i><b>8.4.1</b> Projeter des vecteurs</a></li>
<li class="chapter" data-level="8.4.2" data-path="les-reprojections.html"><a href="les-reprojections.html#modifier-la-projection-dune-carte."><i class="fa fa-check"></i><b>8.4.2</b> Modifier la projection d’une carte.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="geocodage.html"><a href="geocodage.html"><i class="fa fa-check"></i><b>9</b> Géocodage</a>
<ul>
<li class="chapter" data-level="9.1" data-path="geocodage.html"><a href="geocodage.html#géolocalisation-à-ladresse"><i class="fa fa-check"></i><b>9.1</b> Géolocalisation à l’adresse</a></li>
<li class="chapter" data-level="9.2" data-path="geocodage.html"><a href="geocodage.html#digitalisation"><i class="fa fa-check"></i><b>9.2</b> Digitalisation</a></li>
</ul></li>
<li class="part"><span><b>IV Créer des cartes sous R</b></span></li>
<li class="chapter" data-level="10" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html"><i class="fa fa-check"></i><b>10</b> Créer des cartes statiques avec {ggplot2}</a>
<ul>
<li class="chapter" data-level="10.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#librairies"><i class="fa fa-check"></i><b>10.1</b> Librairies</a></li>
<li class="chapter" data-level="10.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#introduction-les-cartes-statiques-en-r"><i class="fa fa-check"></i><b>10.2</b> Introduction : les cartes statiques en R</a></li>
<li class="chapter" data-level="10.3" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#quelques-rappels-sur-ggplot2"><i class="fa fa-check"></i><b>10.3</b> Quelques rappels sur <code>{ggplot2}</code></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ggplot2-les-concepts-clefs"><i class="fa fa-check"></i><b>10.3.1</b> <code>{ggplot2}</code> : les concepts clefs</a></li>
<li class="chapter" data-level="10.3.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ggplot2-pour-les-cartes"><i class="fa fa-check"></i><b>10.3.2</b> {ggplot2} pour les cartes</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#faire-des-cartes-avec-ggplot2"><i class="fa fa-check"></i><b>10.4</b> Faire des cartes avec {ggplot2}</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#préparation-des-données"><i class="fa fa-check"></i><b>10.4.1</b> Préparation des données</a></li>
<li class="chapter" data-level="10.4.2" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-cartes-choroplèthe"><i class="fa fa-check"></i><b>10.4.2</b> Les cartes choroplèthe</a></li>
<li class="chapter" data-level="10.4.3" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-cartes-à-ronds-proportionnels"><i class="fa fa-check"></i><b>10.4.3</b> Les cartes à ronds proportionnels</a></li>
<li class="chapter" data-level="10.4.4" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#lhabillage-simple"><i class="fa fa-check"></i><b>10.4.4</b> L’habillage simple</a></li>
<li class="chapter" data-level="10.4.5" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-thèmes"><i class="fa fa-check"></i><b>10.4.5</b> Les thèmes</a></li>
<li class="chapter" data-level="10.4.6" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-scales"><i class="fa fa-check"></i><b>10.4.6</b> Les scales</a></li>
<li class="chapter" data-level="10.4.7" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exercice-3---carte-des-données-dvf-par-quartie-de-nantes"><i class="fa fa-check"></i><b>10.4.7</b> Exercice 3 - Carte des données dvf par quartie de Nantes</a></li>
<li class="chapter" data-level="10.4.8" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#les-facettes"><i class="fa fa-check"></i><b>10.4.8</b> Les facettes</a></li>
<li class="chapter" data-level="10.4.9" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#ajouter-une-barre-déchelle-et-la-flèche-du-nord"><i class="fa fa-check"></i><b>10.4.9</b> Ajouter une barre d’échelle et la flèche du nord</a></li>
<li class="chapter" data-level="10.4.10" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#mettre-plusieurs-cartes-côte-à-côte"><i class="fa fa-check"></i><b>10.4.10</b> Mettre plusieurs cartes côte à côte</a></li>
<li class="chapter" data-level="10.4.11" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exporter-sa-carte"><i class="fa fa-check"></i><b>10.4.11</b> Exporter sa carte</a></li>
<li class="chapter" data-level="10.4.12" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#exercice-4-assemblage-de-cartes-sur-dvf"><i class="fa fa-check"></i><b>10.4.12</b> Exercice 4 : Assemblage de cartes sur dvf</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="creer-des-cartes-avec-ggplot2.html"><a href="creer-des-cartes-avec-ggplot2.html#faire-des-cartes-avec-mapfactory"><i class="fa fa-check"></i><b>10.5</b> Faire des cartes avec {mapfactory}</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="cartogramm.html"><a href="cartogramm.html"><i class="fa fa-check"></i><b>11</b> Créer des cartogrammes</a>
<ul>
<li class="chapter" data-level="11.1" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-daires-contigues"><i class="fa fa-check"></i><b>11.1</b> Cartogramme d’aires contigues</a></li>
<li class="chapter" data-level="11.2" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-daire-non-contigue"><i class="fa fa-check"></i><b>11.2</b> Cartogramme d’aire non contigue</a></li>
<li class="chapter" data-level="11.3" data-path="cartogramm.html"><a href="cartogramm.html#cartogramme-de-dorling"><i class="fa fa-check"></i><b>11.3</b> Cartogramme de Dorling</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html"><i class="fa fa-check"></i><b>12</b> Créer des cartes pour le web</a>
<ul>
<li class="chapter" data-level="12.1" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-leaflet"><i class="fa fa-check"></i><b>12.1</b> Les cartes Leaflet</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#carte-choroplète"><i class="fa fa-check"></i><b>12.1.1</b> Carte choroplète</a></li>
<li class="chapter" data-level="12.1.2" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#carte-à-ronds-proportionnels"><i class="fa fa-check"></i><b>12.1.2</b> Carte à ronds proportionnels</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-ggplot"><i class="fa fa-check"></i><b>12.2</b> Les cartes ggplot</a></li>
<li class="chapter" data-level="12.3" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#les-cartes-mapfactory"><i class="fa fa-check"></i><b>12.3</b> Les cartes {mapfactory}</a></li>
<li class="chapter" data-level="12.4" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#exporter-une-sortie-html"><i class="fa fa-check"></i><b>12.4</b> Exporter une sortie html</a></li>
<li class="chapter" data-level="12.5" data-path="creer-des-cartes-pour-le-web.html"><a href="creer-des-cartes-pour-le-web.html#exercice-5-cartes-dvf-pour-le-web"><i class="fa fa-check"></i><b>12.5</b> Exercice 5 : cartes DVF pour le web</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="osm.html"><a href="osm.html"><i class="fa fa-check"></i><b>13</b> Focus sur OpenStreetMap</a>
<ul>
<li class="chapter" data-level="13.1" data-path="osm.html"><a href="osm.html#afficher-une-carte-interactive"><i class="fa fa-check"></i><b>13.1</b> Afficher une carte interactive</a></li>
<li class="chapter" data-level="13.2" data-path="osm.html"><a href="osm.html#importer-les-fonds-de-carte-pour-ggplot"><i class="fa fa-check"></i><b>13.2</b> Importer les fonds de carte pour ggplot</a></li>
<li class="chapter" data-level="13.3" data-path="osm.html"><a href="osm.html#importer-des-données-osm"><i class="fa fa-check"></i><b>13.3</b> Importer des données OSM</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="osm.html"><a href="osm.html#osmdata"><i class="fa fa-check"></i><b>13.3.1</b> <code>{osmdata}</code></a></li>
<li class="chapter" data-level="13.3.2" data-path="osm.html"><a href="osm.html#osmextract"><i class="fa fa-check"></i><b>13.3.2</b> <code>osmextract</code></a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="osm.html"><a href="osm.html#calculer-des-itinéraires"><i class="fa fa-check"></i><b>13.4</b> Calculer des itinéraires</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="osm.html"><a href="osm.html#calcul-dun-itinéraire"><i class="fa fa-check"></i><b>13.4.1</b> Calcul d’un itinéraire</a></li>
<li class="chapter" data-level="13.4.2" data-path="osm.html"><a href="osm.html#calcul-dune-matrice-de-temps"><i class="fa fa-check"></i><b>13.4.2</b> Calcul d’une matrice de temps</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V A propos</b></span></li>
<li class="chapter" data-level="14" data-path="a-propos.html"><a href="a-propos.html"><i class="fa fa-check"></i><b>14</b> A propos de ce document</a>
<ul>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#code-source"><i class="fa fa-check"></i>Code source</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#inspiration"><i class="fa fa-check"></i>Inspiration</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#licence"><i class="fa fa-check"></i>Licence</a></li>
<li class="chapter" data-level="" data-path="a-propos.html"><a href="a-propos.html#session-info"><i class="fa fa-check"></i>Session info</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html"><i class="fa fa-check"></i><b>15</b> Annexe : créer des cartes avec tmap</a>
<ul>
<li class="chapter" data-level="15.1" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#fonction-tm_shape"><i class="fa fa-check"></i><b>15.1</b> Fonction <code>tm_shape()</code></a></li>
<li class="chapter" data-level="15.2" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemple-de-carte-choroplèthe"><i class="fa fa-check"></i><b>15.2</b> Exemple de carte choroplèthe</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#préparation-des-données-1"><i class="fa fa-check"></i><b>15.2.1</b> Préparation des données</a></li>
<li class="chapter" data-level="15.2.2" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#cartographie"><i class="fa fa-check"></i><b>15.2.2</b> Cartographie</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemple-de-carte-à-ronds-proportionnels"><i class="fa fa-check"></i><b>15.3</b> Exemple de carte à ronds proportionnels</a></li>
<li class="chapter" data-level="15.4" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#discretisation"><i class="fa fa-check"></i><b>15.4</b> Discretisation</a></li>
<li class="chapter" data-level="15.5" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#exemples-de-cartes-avec-facet"><i class="fa fa-check"></i><b>15.5</b> Exemples de cartes avec facet</a></li>
<li class="chapter" data-level="15.6" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#gestion-des-palettes"><i class="fa fa-check"></i><b>15.6</b> Gestion des palettes</a></li>
<li class="chapter" data-level="15.7" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#la-mise-en-page"><i class="fa fa-check"></i><b>15.7</b> La mise en page</a></li>
<li class="chapter" data-level="15.8" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#assembler-plusieurs-cartes"><i class="fa fa-check"></i><b>15.8</b> Assembler plusieurs cartes</a></li>
<li class="chapter" data-level="15.9" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#tmap-pour-le-web"><i class="fa fa-check"></i><b>15.9</b> tmap pour le web</a></li>
<li class="chapter" data-level="15.10" data-path="creer-des-cartes-avec-tmap.html"><a href="creer-des-cartes-avec-tmap.html#export-dune-carte"><i class="fa fa-check"></i><b>15.10</b> Export d’une carte</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html"><i class="fa fa-check"></i><b>16</b> Exercices corrigés</a>
<ul>
<li class="chapter" data-level="16.1" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-1---manipuler-des-objets-sf-1"><i class="fa fa-check"></i><b>16.1</b> Exercice 1 - manipuler des objets sf</a></li>
<li class="chapter" data-level="16.2" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-2-exploitation-des-données-dvf-en-api-1"><i class="fa fa-check"></i><b>16.2</b> Exercice 2 : exploitation des données DVF en API</a></li>
<li class="chapter" data-level="16.3" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-3-ggplot-chap-10-visualisation-des-données-dvf-en-api"><i class="fa fa-check"></i><b>16.3</b> Exercice 3 ggplot chap 10 : Visualisation des données DVF en API</a></li>
<li class="chapter" data-level="16.4" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-4-assemblage-de-cartes-sur-dvf-1"><i class="fa fa-check"></i><b>16.4</b> Exercice 4 : Assemblage de cartes sur dvf</a></li>
<li class="chapter" data-level="16.5" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-5-cartes-pour-le-web"><i class="fa fa-check"></i><b>16.5</b> Exercice 5 : cartes pour le web</a></li>
<li class="chapter" data-level="16.6" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#exercice-6-exercices-bonus-odd"><i class="fa fa-check"></i><b>16.6</b> Exercice 6 : exercices bonus (ODD)</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#chargement-des-données-et-datapréparation"><i class="fa fa-check"></i><b>16.6.1</b> Chargement des données et datapréparation</a></li>
<li class="chapter" data-level="16.6.2" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#datavisualisation"><i class="fa fa-check"></i><b>16.6.2</b> Datavisualisation</a></li>
<li class="chapter" data-level="16.6.3" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#carte-monde"><i class="fa fa-check"></i><b>16.6.3</b> Carte monde</a></li>
<li class="chapter" data-level="16.6.4" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#zoom-sur-les-deux-continents"><i class="fa fa-check"></i><b>16.6.4</b> Zoom sur les deux continents</a></li>
<li class="chapter" data-level="16.6.5" data-path="exercices-corrigés.html"><a href="exercices-corrigés.html#assemblage"><i class="fa fa-check"></i><b>16.6.5</b> Assemblage</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://mtes-mct.github.io/parcours-r/">Liste des formations R</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyses spatiales avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="les-reprojections" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapitre 8</span> Les reprojections<a href="les-reprojections.html#les-reprojections" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Dans ce chapitre, nous allons utiliser les librairies suivantes.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="les-reprojections.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CRAN</span></span>
<span id="cb131-2"><a href="les-reprojections.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot) </span>
<span id="cb131-3"><a href="les-reprojections.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapview) </span>
<span id="cb131-4"><a href="les-reprojections.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb131-5"><a href="les-reprojections.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb131-6"><a href="les-reprojections.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code></pre></div>
<p>Pour rappel, il existe deux types de CRS, les CRS géographiques (longitude/latitude avec pour unité de compte des degrés) et les CRS projetés (avec un datum et une unité en mètre par exemple).</p>
<p>Autrefois, la plupart des fonctions de <code>sf</code> présupposaient de travailler avec un CRS projeté, car les fonctions de GEOS sur lesquelles elles se basent, le nécessitaient aussi.</p>
<div id="un-premier-exemple-de-reprojection" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Un premier exemple de reprojection<a href="les-reprojections.html#un-premier-exemple-de-reprojection" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Prenons les coordonnées de Nantes en WGS 84:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="les-reprojections.html#cb132-1" aria-hidden="true" tabindex="-1"></a>nantes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">1.553621</span>, <span class="at">lat =</span> <span class="fl">47.218371</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="les-reprojections.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="les-reprojections.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4326</span>)</span></code></pre></div>
<p>On peut visualiser nos données</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="les-reprojections.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(nantes)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-4cbef52bbddaaa4cc817" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-4cbef52bbddaaa4cc817">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.218371,-1.553621,6,null,"nantes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.218371,-1.553621,47.218371,true,"nantes","Zoom to nantes","<strong> nantes <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"nantes",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes"}]}],"limits":{"lat":[47.218371,47.218371],"lng":[-1.553621,-1.553621]},"setView":[[47.218371,-1.553621],18,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p><code>st_is_longlat()</code> est une fonction de <code>sf</code> qui permet de faire un test sur la famille de CRS à laquelle on a affaire.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="les-reprojections.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_is_longlat</span>(nantes)</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Essayons de créer un buffer de 1 km autour de Nantes.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="les-reprojections.html#cb136-1" aria-hidden="true" tabindex="-1"></a>nantes_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(nantes, <span class="at">dist =</span> <span class="dv">1000</span>)</span>
<span id="cb136-2"><a href="les-reprojections.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(<span class="fu">list</span>(nantes, nantes_buffer))</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-722d31479a37053fef76" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-722d31479a37053fef76">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.218371,-1.553621,6,null,"nantes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.218371,-1.553621,47.218371,true,"nantes","Zoom to nantes","<strong> nantes <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-1.542290364943458,-1.542294482448308,-1.542302717511822,-1.542465916882024,-1.542474152887851,-1.54263735370411,-1.54264559065227,-1.542808792914596,-1.542817030805108,-1.542970034264875,-1.542970549186426,-1.542980749438462,-1.542988473346392,-1.543131277825099,-1.543132307779478,-1.543152708468865,-1.543159918276154,-1.543302724020194,-1.543303754092375,-1.543324154962523,-1.54333136559442,-1.543494414257975,-1.543494422306435,-1.543494581689576,-1.543502815301221,-1.543666024794034,-1.543674267396586,-1.543837478335527,-1.543845721880544,-1.544008934265623,-1.544090540673971,-1.544094663126406,-1.544176269896291,-1.544180392584351,-1.544302803335437,-1.544304864849453,-1.544345668559501,-1.544351853291741,-1.544515069144617,-1.54452331638782,-1.544686533686866,-1.544768142552197,-1.544772266853762,-1.544853876080637,-1.544858000617845,-1.545021219938557,-1.545029469937582,-1.545192690704484,-1.545274301303741,-1.545278426983245,-1.545360037944052,-1.545364163859209,-1.545527386647794,-1.545535639402761,-1.545698863637557,-1.545862088447833,-1.545870343016185,-1.546033569272681,-1.546155989342711,-1.54615805337699,-1.546198860193356,-1.546205052486436,-1.546368280764641,-1.54649070235095,-1.546492766838593,-1.546533574160387,-1.546539767813571,-1.54670299811349,-1.54685602704231,-1.546856543287348,-1.546866745237321,-1.546874488997646,-1.547037721319287,-1.547200954216398,-1.547209216038717,-1.547372450382088,-1.547617302976142,-1.547621435002801,-1.547703053039585,-1.547707185301949,-1.547870422242519,-1.548033659758549,-1.548041926078927,-1.548368404579006,-1.548592859883044,-1.548593893545537,-1.548614298640733,-1.54861739967579,-1.548699020309767,-1.548703155256649,-1.548866397391613,-1.549029640102023,-1.549111261673021,-1.549115397726482,-1.549197019659054,-1.549201155948249,-1.549364400680406,-1.549690891871042,-1.549772515028349,-1.549776652859584,-1.549858276378469,-1.549862414445451,-1.550025662350235,-1.550188910830453,-1.5503521598861,-1.550515409517174,-1.550523689188783,-1.550686940266178,-1.551013444147237,-1.551339950329969,-1.551584831477478,-1.551588974170793,-1.551670601725397,-1.551674744654492,-1.551838000630718,-1.55200125718235,-1.552164514309386,-1.552327772011823,-1.552491030289657,-1.552654289142886,-1.552817548571507,-1.552980808575517,-1.553144069154913,-1.553307330309692,-1.553470592039851,-1.553633854345388,-1.553797117226299,-1.553960380682581,-1.554123644714232,-1.554286909321249,-1.554450174503628,-1.554613440261367,-1.554776706594462,-1.554939973502912,-1.555103240986712,-1.555266509045861,-1.555429777680354,-1.55559304689019,-1.555756316675365,-1.555919587035876,-1.556082857971721,-1.556078703284645,-1.556160338750566,-1.556156183863842,-1.556237819255846,-1.55656436226217,-1.556890907569769,-1.557217455178621,-1.557209139797977,-1.557372413594354,-1.557535687966033,-1.55769896291301,-1.557862238435283,-1.558025514532849,-1.558017194869617,-1.558180470671455,-1.558507024000981,-1.558670301528662,-1.558661978453868,-1.558825255685804,-1.55898853349301,-1.559151811875482,-1.559143486260163,-1.559470043008849,-1.559633322246076,-1.559624994090252,-1.559788273031709,-1.559951552548411,-1.560114832640358,-1.560106501944047,-1.560433062111609,-1.560426812830485,-1.560467632849899,-1.560465549710828,-1.560588009821462,-1.560751290472297,-1.560914571698355,-1.560906236792152,-1.561069517722409,-1.56123279922788,-1.56122446265227,-1.561387743861932,-1.561551025646801,-1.561542687401801,-1.561705968890855,-1.561869250955106,-1.561860911040735,-1.562024192809164,-1.562020022443724,-1.562101663325881,-1.562097492760858,-1.562342415616848,-1.562335116028581,-1.56235552622973,-1.56235448342234,-1.56249735498676,-1.562660637313893,-1.562652293262528,-1.562815575293825,-1.562811402859905,-1.56289304387349,-1.562888871239998,-1.562970512179623,-1.563133794490243,-1.563125447971296,-1.563288729986073,-1.563281426079532,-1.563301836276554,-1.56330079285227,-1.563443664387789,-1.56343949032096,-1.563521131178357,-1.563516956911966,-1.563598597695401,-1.563761879693627,-1.56375352990892,-1.563916811611294,-1.563908461028357,-1.564071742434877,-1.564064434972386,-1.564084845093376,-1.564083801161102,-1.564226672164387,-1.564220408023042,-1.564261228227263,-1.564259140134809,-1.564381600799834,-1.564377424301957,-1.564459064707288,-1.564454888009864,-1.564536528341229,-1.56453235144426,-1.564613991701661,-1.564609814605147,-1.564691454788583,-1.564687277492526,-1.564768917601998,-1.564764740106399,-1.564846380141906,-1.564840113606022,-1.564880933514387,-1.564878844623758,-1.565001304401208,-1.564993992748276,-1.565014402647375,-1.565013358116469,-1.5651562275665,-1.565147870598133,-1.565311149637792,-1.565302791871298,-1.565466070615096,-1.565457712050485,-1.565453532795489,-1.565535171729841,-1.565530992275319,-1.565612631135706,-1.565604794299306,-1.565614999115933,-1.565614476659047,-1.56576754912697,-1.565759189039,-1.565922466024287,-1.565914105138243,-1.565905809643613,-1.56590708523377,-1.565907019915146,-1.566069020143562,-1.566060658532304,-1.566056477753994,-1.566138115225722,-1.566133934247901,-1.566215571645665,-1.566207209309219,-1.566203028168316,-1.566284665056674,-1.566280483716265,-1.566362120530659,-1.566353757469048,-1.566349575965566,-1.566431212270561,-1.566427030567577,-1.566508666798611,-1.566500303011859,-1.566491939297973,-1.566655210449582,-1.566646845937713,-1.566630639903338,-1.566640844209525,-1.566640321435375,-1.566793386246675,-1.56678502108259,-1.566776655991383,-1.566768290973053,-1.566764108491216,-1.566845741739943,-1.566841559058624,-1.566923192233396,-1.566864633560197,-1.5670278942455,-1.567019528141517,-1.567011162110415,-1.567002796152197,-1.566994430266859,-1.56683117306452,-1.566789349084547,-1.56677262000264,-1.56669099466452,-1.566686812657252,-1.566605187680533,-1.566601005909147,-1.566592642421017,-1.566584279005744,-1.566575915663328,-1.566453480753209,-1.566451390092233,-1.566410578581808,-1.566395944463359,-1.566387582210122,-1.56623454161063,-1.566234019023234,-1.566223816337968,-1.56621597761218,-1.566207616375232,-1.566125995817352,-1.566121815443839,-1.566040195247337,-1.566036015109679,-1.566027654888983,-1.565946035489148,-1.565941855623753,-1.56586023658529,-1.565856056955744,-1.565847697751264,-1.565766079509453,-1.565761900152159,-1.565680282271717,-1.565676103150263,-1.565667744961961,-1.565509611992626,-1.565509350826769,-1.565504249773075,-1.565496153693124,-1.565487796520964,-1.565324564813059,-1.565316208584216,-1.565158079258737,-1.565157818154111,-1.565152717217962,-1.56514462303619,-1.565063008555795,-1.56505883115794,-1.564977217038898,-1.56497303987686,-1.564964685607365,-1.564801459106197,-1.564793105779952,-1.56462988072417,-1.564621528341158,-1.564458304730751,-1.564449953290952,-1.564307133865101,-1.564306090035447,-1.564285687309858,-1.564278380629307,-1.564135562468141,-1.564134518756384,-1.564114116211465,-1.564106810356193,-1.563963993459704,-1.563962949865842,-1.56394254750159,-1.56393524247158,-1.563782225740044,-1.563781704005317,-1.563771502911248,-1.56376367697544,-1.563600460591759,-1.563592113867744,-1.563428898929377,-1.563420553148464,-1.5632573396554,-1.563248994817568,-1.563085782769798,-1.563004176961505,-1.563000005222629,-1.562918399775657,-1.562914228272543,-1.562751018244967,-1.562742676163605,-1.562579467581303,-1.562571126442955,-1.562265113532616,-1.562264071099418,-1.562243670324193,-1.562236373418779,-1.562073168301907,-1.562064829919861,-1.561901626248232,-1.56173842315152,-1.561730086582737,-1.561566884931258,-1.56144448406994,-1.561442400319849,-1.561401600159002,-1.561395349099138,-1.561232149467801,-1.561150549867728,-1.561146383169892,-1.561064783931124,-1.561060617469005,-1.560897419857804,-1.560815821267801,-1.560811655476538,-1.560730057247836,-1.560725891692284,-1.560562696101211,-1.560481098521273,-1.560476933636563,-1.560395336417923,-1.560391171768916,-1.560227978197966,-1.560069884974369,-1.56006962473795,-1.560064524966377,-1.560056457698847,-1.55989326614801,-1.559730075172109,-1.559721749482019,-1.55955855995129,-1.559395370995498,-1.559232182614648,-1.559223859607746,-1.558897486311315,-1.558739400072622,-1.558739140060557,-1.558734040514304,-1.558725980201733,-1.558562795861089,-1.558399612095395,-1.558236428904654,-1.558228111263914,-1.557901748347672,-1.557575387731266,-1.557567073643671,-1.557403895068081,-1.557240717067457,-1.5570775396418,-1.556914362791114,-1.556832774581387,-1.556828619522597,-1.556747031674151,-1.556742876850993,-1.556579702020404,-1.556253354084158,-1.555927008447844,-1.555918703206474,-1.555755532120922,-1.55559236161036,-1.555429191674788,-1.555266022314211,-1.555102853528631,-1.554939685318051,-1.554776517682476,-1.554613350621905,-1.554450184136344,-1.554287018225795,-1.554123852890261,-1.553960688129745,-1.553952393401929,-1.553299743590417,-1.552973422134826,-1.552810262269583,-1.552818550906875,-1.552655390746606,-1.552492231161381,-1.552329072151204,-1.552165913716076,-1.552002755856001,-1.551839598570982,-1.551676441861022,-1.551513285726122,-1.551350130166288,-1.551186975181521,-1.551023820771825,-1.550860666937201,-1.550868945206018,-1.550705791076433,-1.550379484542512,-1.550053180308942,-1.549890029054796,-1.549898302175488,-1.54973515062641,-1.549571999652434,-1.549408849253564,-1.549245699429801,-1.549082550181149,-1.549090819023749,-1.548764520511749,-1.548601372118431,-1.548605505261702,-1.54852393106321,-1.548528064006975,-1.54844648973476,-1.548283341621677,-1.548120194083729,-1.547957047120918,-1.547965310017363,-1.547802162759675,-1.547475869969737,-1.547484130328086,-1.547320983925827,-1.547157838098724,-1.547161967434858,-1.547080394519488,-1.547084523656101,-1.546839805120221,-1.546676660148594,-1.546684916300713,-1.54652177103424,-1.546358626342945,-1.5463658490125,-1.546345455871371,-1.546346487672208,-1.546203735840794,-1.546040591429846,-1.546046781034981,-1.546005994858987,-1.546008058015308,-1.545885699539896,-1.545722555409309,-1.545728743763317,-1.545687957657415,-1.545690020396692,-1.545567662131557,-1.545404518281347,-1.545411736571956,-1.545391343535965,-1.545392374711235,-1.54524962361579,-1.545086480045972,-1.545094727857239,-1.544931583992608,-1.544768440703198,-1.544776686846239,-1.544613543262022,-1.544619727263914,-1.544578941294607,-1.544581002583171,-1.544295501424046,-1.544303745100619,-1.544140601502034,-1.544146783654055,-1.544105997681158,-1.544108058353096,-1.543985700486988,-1.543822557168854,-1.543830798378897,-1.543667654765972,-1.54367589517775,-1.543512751270036,-1.543519960927926,-1.543499567884748,-1.543500597826766,-1.543357846681035,-1.543361966079672,-1.543280393976632,-1.543284513175696,-1.543202940998959,-1.543207059998448,-1.543125487748014,-1.543129606547927,-1.543048034223797,-1.542884890006999,-1.542893126355539,-1.542729981843961,-1.542738217394175,-1.542575072587818,-1.542583307339694,-1.542420162238557,-1.542428396192085,-1.542265250796171,-1.542273483951338,-1.542277600555816,-1.542196027421034,-1.542200143825919,-1.542118570617442,-1.542122686822732,-1.542041113540561,-1.542045229546254,-1.541963656190388,-1.541970858862819,-1.541950465451158,-1.541951494395249,-1.541808740670163,-1.541816971501879,-1.541653824056759,-1.541662054090062,-1.541666169133598,-1.541584594974204,-1.541588709818133,-1.541507135585043,-1.541515107724692,-1.541510009313558,-1.541510266479624,-1.541352215986811,-1.541360444494934,-1.541364558775875,-1.541282983886634,-1.541287097967961,-1.541205523005025,-1.541213750786367,-1.541050600421872,-1.541058827404742,-1.54106705445928,-1.54090390292985,-1.540920355513608,-1.540757202819226,-1.540765428348428,-1.540773653949286,-1.540610500089938,-1.540635174711886,-1.540472018817359,-1.540480242964441,-1.54048846718317,-1.540496691473544,-1.540502859738344,-1.540462070038794,-1.540464126081627,-1.540341757035588,-1.540349980599028,-1.540366427940833,-1.540382875569212,-1.540386987521085,-1.540305405943698,-1.540309517695915,-1.540227936044819,-1.540236159167849,-1.540244382362517,-1.540252605628827,-1.540260828966777,-1.54026905237637,-1.540277275857606,-1.540285499410485,-1.54029372303501,-1.540416100787399,-1.540418156867912,-1.540458949578369,-1.540465118009965,-1.540481567357937,-1.540498016992533,-1.540506241917317,-1.540659219593618,-1.540659733704795,-1.540669932237932,-1.54067764399018,-1.540685869928672,-1.540694095938832,-1.54070232202066,-1.540865502283749,-1.540873729307664,-1.540881956403256,-1.540963547621024,-1.540967661413308,-1.541049252992554,-1.541053367020367,-1.541061595129759,-1.54106982331084,-1.541233009077054,-1.54124946739521,-1.541412655477836,-1.541420885614938,-1.541502480307297,-1.54150659562036,-1.541588190674212,-1.541592306222825,-1.541600537373837,-1.541743330206794,-1.541744359200924,-1.54176475822663,-1.541771961312132,-1.541780193477091,-1.541943387638663,-1.541951620745871,-1.542094416871037,-1.542095446109696,-1.542115845605719,-1.542123050402933,-1.542204648857803,-1.54220876612708,-1.542290364943458],"lat":[47.2230373074666,47.22311354102587,47.22326600848255,47.22326381792721,47.22341628581226,47.22341409499479,47.22356656330821,47.22356437222862,47.2237168409704,47.22371478659457,47.22372431590458,47.22372417893861,47.22386711879882,47.22386520115855,47.22388425983407,47.22388398587012,47.22401739679346,47.22401547892382,47.22403453765287,47.22403426365616,47.2241676749543,47.22416548496702,47.22416563386372,47.22416563172285,47.22431795328133,47.22431576089102,47.22446823177455,47.22446603912206,47.22461851043393,47.22461631751926,47.22461522097205,47.22469145678018,47.22469036016741,47.22476659608262,47.22476495104269,47.22480306903834,47.22480252066033,47.22491687481212,47.22491468113338,47.22506715370774,47.2250649597668,47.22506386270646,47.2251400991458,47.2251390020199,47.22521523856633,47.22521304412349,47.22536551753195,47.22536332282688,47.22536222538446,47.22543846224086,47.22543736473287,47.22551360169636,47.22551140648933,47.22566388073189,47.22566168526262,47.22565948955365,47.22581196420197,47.22580976823073,47.22580812109498,47.22584623981764,47.22584569074102,47.22596004707384,47.22595785060061,47.22595620308836,47.22599432191245,47.22599377271032,47.22610812934744,47.22610593237219,47.22610387249017,47.22611340221864,47.2261132648856,47.22625621102275,47.22625401354546,47.22625181582843,47.22640429209969,47.22640209412035,47.22639879670179,47.22647503497828,47.22647393571324,47.22655017409679,47.22654797537561,47.22654577641466,47.22669825347475,47.22669385478841,47.22669083013519,47.22670988978987,47.22670961479857,47.22676679380383,47.22676569379691,47.22684193256357,47.2268397323586,47.22683753191384,47.22683643160155,47.22691267045268,47.2269115700748,47.22698780903299,47.22698560808607,47.22698120547282,47.22698010466965,47.22705634370101,47.22705524283223,47.22713148197065,47.22712928004193,47.22712707787341,47.22712487546507,47.22712267281693,47.22727515134147,47.22727294843091,47.2272685418903,47.22726413439042,47.22726082813594,47.22733706749377,47.22733596528337,47.22741220474824,47.22741000013626,47.22740779528444,47.22740559019277,47.22740338486127,47.22740117928991,47.22739897347871,47.22739676742765,47.22739456113676,47.22739235460598,47.22739014783536,47.22738794082487,47.22738573357451,47.2273835260843,47.22738131835422,47.22737911038426,47.22737690217443,47.22737469372473,47.22737248503515,47.22737027610568,47.22736806693633,47.22736585752709,47.22736364787797,47.22736143798895,47.22735922786004,47.22735701749124,47.22735480688254,47.22735259603394,47.22727635687493,47.22727525136634,47.22719901232571,47.22719790676281,47.22719348391148,47.2271890601005,47.22718463532988,47.22703215773426,47.22702994501178,47.22702773204938,47.22702551884706,47.22702330540483,47.22702109172265,47.2268686146914,47.22686640079203,47.2268619722735,47.22685975765435,47.22670728116479,47.22670506632843,47.22670285125211,47.22670063593587,47.22654815996532,47.2265437286585,47.22654151264517,47.22638903719363,47.22638682096311,47.22638460449264,47.22638238778222,47.22622991284972,47.22622547875454,47.22611112288514,47.22611056856002,47.22607244999466,47.22607078693359,47.22606856930888,47.22606635144421,47.2259138775271,47.22591165944525,47.22590944112343,47.22575696770266,47.22575474916363,47.22575253038467,47.22560005746023,47.22559783846408,47.22559561922795,47.22544314679988,47.22544092734657,47.22536469131296,47.22536358150202,47.22528734558681,47.22528401581111,47.22515060326059,47.2251503257574,47.22513126685015,47.22512932422534,47.22512710385773,47.22497463289598,47.22497241231119,47.22489617701076,47.22489506663408,47.22481883145205,47.22481772102107,47.22481549997913,47.22466302998736,47.22466080872825,47.22452739787521,47.22452712020344,47.22450806153868,47.2245061177338,47.22442988315517,47.22442877233274,47.22435253787252,47.2243514269958,47.22434920506236,47.22419673651422,47.22419451436362,47.2240420462891,47.22403982392133,47.22390641474588,47.22390613693553,47.22388707851043,47.22388513373549,47.22377078334777,47.22377022766831,47.22373211093018,47.22373044380611,47.22365421042293,47.2236530989376,47.22357686567282,47.22357575413319,47.22349952098683,47.22349840939292,47.22342217636496,47.22342106471675,47.2233448318072,47.2233437201047,47.22326748731356,47.22326637555678,47.22315202658994,47.22315147069332,47.22311335442883,47.22311168665328,47.22297827996439,47.22297800199117,47.2229589439213,47.22295699800627,47.22280453372078,47.22280230961577,47.22264984580391,47.22264762148174,47.22249515814354,47.22241892664349,47.22241781440954,47.22234158302791,47.22234047073967,47.22219753721358,47.22219739817467,47.2221878692871,47.2221857835923,47.22203332165222,47.22203109670146,47.22187863523503,47.22172736531936,47.22172734793634,47.22172615683641,47.22172394907436,47.22157148853241,47.22149525843049,47.22149414578511,47.22141791580161,47.22141680310194,47.22126434348447,47.22118811384481,47.22118700110227,47.22111077158102,47.22110965878419,47.22095720009123,47.22088097091381,47.22087985807413,47.22080362901514,47.22080251612117,47.22065005835271,47.22049760103508,47.22049537511287,47.2203429182689,47.22004753441668,47.22004739529277,47.22003786680968,47.22003577983987,47.21988332437125,47.21973086935348,47.21957841478654,47.21950218767213,47.21950107457531,47.21942484757933,47.21942373442823,47.21835656839898,47.21835434207677,47.21820189161309,47.21804944160027,47.2178969920383,47.21774454292716,47.21774676915798,47.21698453025088,47.21667963784402,47.21668075078951,47.21660452796387,47.21660564084367,47.21652941812503,47.2163769730259,47.21622452837764,47.21607208418023,47.21607375332754,47.21603564234434,47.21603619869536,47.21576942259207,47.21561697972442,47.21561906584834,47.21560953818275,47.21560967725008,47.21546676247614,47.21531432048738,47.21531543297027,47.21523921213925,47.21524032455648,47.21516410383246,47.21501166272261,47.21501277506273,47.21493655467118,47.21493766694563,47.21486144666108,47.21470900643013,47.2147101186275,47.2146338986754,47.2146350108071,47.21455879096201,47.21440635160998,47.21440850616133,47.21440374243816,47.21440381193604,47.21425613673528,47.21410369826217,47.21410592202595,47.21395348398091,47.21395563800125,47.21395087431892,47.21395094379967,47.21380326986505,47.21380438151427,47.21372816286915,47.21372927445269,47.2136530559146,47.21350061917656,47.21350284212957,47.2133504058196,47.21335262850999,47.21320019262809,47.21320241505585,47.21304997960203,47.21305192400964,47.21303286960712,47.21303314736429,47.21289976674144,47.21290171091926,47.21288265657024,47.2128829342946,47.21274955404632,47.21275149799436,47.21273244369886,47.21273272139038,47.21259934151668,47.21260142406495,47.21259189694298,47.21259203577195,47.21244912915254,47.21245135026729,47.21229891695391,47.21230113780608,47.21214870492081,47.2121509255104,47.21199849305324,47.21200071338026,47.21200182345386,47.21192560737727,47.21192671738524,47.21185050141568,47.21185272124038,47.21170028961667,47.21170250917881,47.21155007798323,47.21155423897332,47.21153518510024,47.21153546246925,47.21140208555246,47.21140430434978,47.21125187398767,47.21125409252249,47.21125631081755,47.21110388086082,47.21110609889339,47.21110776226048,47.21106965483179,47.2110702092561,47.21095588713486,47.21095810466519,47.21095921334046,47.21088299871681,47.21088410732645,47.21080789280984,47.21081010983796,47.21081121826213,47.21073500384117,47.21073611219973,47.21065989788581,47.21066211441174,47.21066322258482,47.21058700836658,47.21058811647404,47.21051190236282,47.2105141183866,47.21051626493102,47.21051150155142,47.21051157079102,47.21036390624095,47.21036612176256,47.21036833704447,47.21021590952022,47.21021812453969,47.21022033931948,47.21022255385957,47.21007012671805,47.21007455503374,47.21007669965448,47.21007193631146,47.21007200548902,47.20992434207327,47.2099265556092,47.20992876890545,47.20993098196202,47.20977855558603,47.20978298093478,47.20978740532485,47.20963497930896,47.20963719112182,47.20963940269503,47.20964161402858,47.20964382512248,47.20964493057958,47.20956871768968,47.20956982308117,47.20949361029832,47.20949582089025,47.20950024135522,47.20950466086165,47.20935223552075,47.20935444489184,47.20935665402332,47.20935886291518,47.20936107156742,47.20936327998005,47.20936548815305,47.20936769608646,47.20936990378025,47.20937211123443,47.20937431844902,47.20937652542399,47.20937873215937,47.20922630699749,47.20923513145254,47.20923954224254,47.20924174727817,47.20939417259851,47.20939637741719,47.2093985819963,47.20940078633584,47.2094029904358,47.20940519429619,47.20940739791702,47.20940960129828,47.20941180443998,47.20941400734213,47.2094162100047,47.20941841242774,47.20942061461122,47.20957304065383,47.20957524262035,47.20957964583476,47.20958404809099,47.20958624885979,47.20973867548888,47.20974087604073,47.20974307635304,47.20974527642581,47.20974747625906,47.20974967585276,47.20990210304567,47.20990650155966,47.20990870045736,47.20998491425676,47.20998601362144,47.2100622275392,47.21006332684964,47.21006552529087,47.21006772349256,47.21006992145475,47.21022234970745,47.21022454745268,47.21022894222457,47.21038137099586,47.21038356804509,47.21038576485481,47.2104619794321,47.21046307775278,47.21053929244843,47.21054258706811,47.21054478318185,47.21069721296772,47.21069940886449,47.21070160452176,47.21083498099372,47.2108352554365,47.21085430924675,47.21085623024391,47.2108584254447,47.21097274848581,47.21097329725281,47.21101140499096,47.21101305120636,47.21101524595069,47.21112956936378,47.21113011801666,47.2111682258788,47.21116987175186,47.21117206603972,47.21130544381361,47.21130571808521,47.21132477208145,47.21132669188037,47.21132888571176,47.21148131797749,47.2114835115919,47.21148570496682,47.2116381377285,47.21164033088643,47.2117546557705,47.21175520402678,47.21179331237924,47.21179714976396,47.21194958349501,47.21195177597948,47.21206610159057,47.21206664967848,47.21210475827328,47.21210640245145,47.21210859447944,47.21226102917984,47.21226322099084,47.21241565616465,47.21241784775867,47.21255122892532,47.2125515028602,47.21257055734111,47.2125724747829,47.21264869278686,47.21264978839118,47.21272600651348,47.21272710206356,47.21280332030422,47.21280441580004,47.21288063415905,47.21288172960062,47.21288392030417,47.21303635739409,47.21303854788062,47.21319098544395,47.21319317571349,47.2133456137502,47.21334780380273,47.21350024231285,47.21350243214836,47.21365487113187,47.21373109079271,47.21373218563752,47.21380840541671,47.21380950020727,47.21388572010481,47.2138868148411,47.213963034857,47.21396412953904,47.21409751484792,47.21409778851153,47.21411684358419,47.21411875912717,47.21427119998175,47.21427338897168,47.21442583029962,47.21450205113269,47.21450314555469,47.2145793665061,47.21458046087385,47.21472813929888,47.21472820769554,47.21473297152279,47.21473509170442,47.21488753443003,47.21496375596193,47.21496485017813,47.21504107182837,47.21504216599031,47.2151946096402,47.21519679780693,47.21534924193018,47.21550168650433,47.21550387447649,47.21580876502242,47.21581095279998,47.21596339877176,47.21611584519444,47.21611803277741,47.21657537481821,47.21657756222903,47.21673001050021,47.2168824592223,47.21703490839527,47.2171492455709,47.21714979240722,47.21718790485687,47.21718954528024,47.21734199537746,47.21764689692458,47.21795180027527,47.21802802639476,47.2180291199972,47.21810534623502,47.21810643978321,47.21825889260823,47.21841134588414,47.21856379961093,47.21871625378861,47.21886870841718,47.21902116349663,47.21917361902697,47.21932607500819,47.21932443452877,47.21936254859032,47.21936200173251,47.21947634408201,47.21978125825395,47.22008617422942,47.22023863289346,47.22023658192228,47.22024611060244,47.22024597386345,47.22038890427585,47.22054136381919,47.22069382381341,47.22084628425849,47.22084409621904,47.22099655709255,47.22114901841692,47.22114792428489,47.22122415511054,47.22122306091301,47.22129929184575,47.2214517540494,47.22160421670393,47.22160202807302,47.22190695468973,47.22190476577431,47.22205722973649,47.2220561351777,47.22213236732225,47.22213127269795,47.22220750494959,47.22235996979103,47.22235805402487,47.22237711215929,47.22237683846308,47.22251024559883,47.22266271131951,47.22266052157295,47.22281298772202,47.22281107147755,47.22283012977542,47.22282985601088,47.2229632642908,47.22296216918539,47.22303840263756,47.2230373074666]}]]],null,"nantes_buffer",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addHomeButton","args":[-1.5670278942455,47.20922630699749,-1.540227936044819,47.22741220474824,true,"nantes_buffer","Zoom to nantes_buffer","<strong> nantes_buffer <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["nantes","nantes_buffer"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_buffer"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_buffer"}]},{"method":"addHomeButton","args":[-1.5670278942455,47.20922630699749,-1.540227936044819,47.22741220474824,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[47.218371,47.218371],"lng":[-1.553621,-1.553621]},"fitBounds":[47.20922630699749,-1.5670278942455,47.22741220474824,-1.540227936044819,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Le buffer est pixelisé en longitude / latitude.</p>
<p>Tentons une reprojection. La fonction permettant une reprojection est <code>st_transform()</code>.
On va ici passer en Lambert 93 nos données.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="les-reprojections.html#cb137-1" aria-hidden="true" tabindex="-1"></a>nantes_proj <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(nantes, <span class="dv">2154</span>)</span></code></pre></div>
<p>Le CRS lambert 93 est bien un CRS projeté :</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="les-reprojections.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_is_longlat</span>(nantes_proj)</span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="les-reprojections.html#cb140-1" aria-hidden="true" tabindex="-1"></a>nantes_proj_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(nantes_proj, <span class="at">dist =</span> <span class="dv">1000</span>)</span>
<span id="cb140-2"><a href="les-reprojections.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(<span class="fu">list</span>(nantes_proj, nantes_proj_buffer))</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-bbf918b1b533c76ebfe6" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-bbf918b1b533c76ebfe6">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[47.21837099998227,-1.553621,6,null,"nantes_proj",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.553621,47.21837099998227,-1.553621,47.21837099998227,true,"nantes_proj","Zoom to nantes_proj","<strong> nantes_proj <\/strong>","bottomright"]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_proj"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_proj"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-1.54042918948801,-1.540407525466216,-1.540422078753387,-1.540472808510124,-1.540559574749253,-1.540682138729824,-1.54084016362157,-1.541033215437897,-1.541260764234731,-1.541522185571842,-1.541816762232556,-1.542143686197019,-1.542502060863565,-1.542890903511982,-1.543309148001907,-1.543755647698861,-1.544229178619891,-1.544728442790149,-1.545252071801206,-1.545798630561308,-1.546366621227356,-1.546954487307778,-1.547560617925147,-1.548183352226843,-1.548820983931762,-1.549471766000645,-1.550133915417303,-1.550805618067732,-1.551485033703798,-1.552170300978004,-1.552859542535646,-1.553550870150484,-1.554242389889982,-1.554932207296058,-1.555618432567269,-1.556299185728323,-1.556972601772891,-1.557636835765698,-1.558290067890045,-1.558930508427006,-1.559556402652767,-1.560166035640768,-1.560757736955552,-1.56132988522555,-1.561880912582324,-1.562409308954142,-1.562913626202177,-1.56339248208801,-1.563844564061583,-1.564268632859245,-1.564663525901987,-1.565028160484577,-1.565361536746794,-1.565662740418602,-1.565930945331662,-1.566165415690267,-1.56636550809538,-1.566530673316164,-1.566660457804055,-1.566754504945121,-1.566812556047205,-1.566834451059007,-1.566820129019036,-1.566769628233102,-1.566683086179727,-1.566560739143634,-1.566402921578201,-1.566210065198511,-1.565982697807397,-1.565721441857565,-1.565427012753678,-1.565100216898917,-1.56474194949136,-1.564353192076063,-1.563935009859557,-1.563488548794041,-1.563015032439213,-1.562515758610331,-1.561992095821646,-1.561445479534984,-1.560877408223721,-1.560289439262991,-1.559683184657403,-1.559060306618014,-1.558422513000749,-1.557771552618815,-1.557109210442032,-1.556437302696326,-1.555757671876902,-1.555072181688845,-1.554382711929154,-1.553691153324297,-1.552999402337584,-1.552309355960691,-1.551622906503717,-1.550941936398174,-1.550268313027286,-1.549603883597834,-1.548950470067766,-1.548309864143525,-1.547683822360941,-1.54707406126324,-1.546482252689476,-1.545910019186368,-1.545358929556186,-1.544830494552943,-1.544326162738719,-1.543847316511523,-1.543395268315591,-1.542971257044499,-1.542576444646981,-1.542211912944706,-1.541878660670715,-1.541577600736604,-1.541309557735889,-1.541075265690335,-1.540875366045341,-1.540710405919824,-1.540580836615284,-1.540487012388057,-1.54042918948801],"lat":[47.21888913029238,47.21841803544707,47.21794681365609,47.21747675649232,47.21700915230345,47.21654528268113,47.21608641894923,47.21563381868031,47.21518872225037,47.21475234944083,47.21432589609731,47.21391053085455,47.21350739193569,47.21311758403548,47.21274217529552,47.21238219437968,47.21203862765804,47.21171241650667,47.21140445473094,47.21111558611901,47.21084660213261,47.21059823974099,47.21037117940426,47.2101660432113,47.20998339317772,47.20982372970808,47.20968749022672,47.20957504798113,47.20948671102084,47.20942272135451,47.20938325428818,47.20936841794534,47.20937825297146,47.20941273242265,47.2094717618394,47.20955517950494,47.2096627568877,47.20979419926645,47.20994914653662,47.21012717419531,47.21032779450287,47.21055045781722,47.21079455409766,47.21105941457421,47.21134431357741,47.21164847052424,47.21197105205422,47.21231117431022,47.21266790535752,47.21304026773476,47.21342724112971,47.21382776517234,47.21424074233814,47.21466504095317,47.21509949829296,47.21554292376674,47.21599410217831,47.21645179705455,47.21691475403266,47.21738170429653,47.21785136805335,47.21832245804041,47.21879368305282,47.21926375148242,47.21973137485813,47.220195271378,47.22065416942352,47.22110681104616,47.22155195541686,47.22198838222895,47.22241489504512,47.22283032457907,47.22323353190327,47.22362341157347,47.22399889466178,47.22435895168973,47.22470259545335,47.22502888373248,47.22533692187672,47.22562586526124,47.22589492160502,47.22614335314608,47.22637047866672,47.22657567536383,47.22675838055893,47.22691809324315,47.22705437545287,47.22716685347248,47.22725521886056,47.22731922929688,47.22735870924796,47.22737355044904,47.22736371220148,47.22732922148445,47.22727017288091,47.2271867283178,47.22707911662142,47.22694763288894,47.22679263767801,47.22661455601677,47.22641387623654,47.22619114863101,47.22594698394524,47.2256820516987,47.22539707834714,47.2250928452882,47.22477018671623,47.22442998733247,47.22407317991664,47.22370074276683,47.22331369701451,47.22291310382244,47.22250006147274,47.22207570235355,47.22164118985224,47.2211977151639,47.22074649402398,47.22028876337369,47.21982577796783,47.21935880693393,47.21888913029238]}]]],null,"nantes_proj_buffer",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addHomeButton","args":[-1.566834451059007,47.20936841794534,-1.540407525466216,47.22737355044904,true,"nantes_proj_buffer","Zoom to nantes_proj_buffer","<strong> nantes_proj_buffer <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],["nantes_proj","nantes_proj_buffer"],{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["nantes_proj_buffer"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"nantes_proj_buffer"}]},{"method":"addHomeButton","args":[-1.566834451059007,47.20936841794534,-1.540407525466216,47.22737355044904,true,null,"Zoom to full extent","<strong>Zoom full<\/strong>","bottomleft"]}],"limits":{"lat":[47.21837099998227,47.21837099998227],"lng":[-1.553621,-1.553621]},"fitBounds":[47.20936841794534,-1.566834451059007,47.22737355044904,-1.540407525466216,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Les contours du buffer sont cette fois plus nets, également les mesures de surfaces sont plus précises en utilisant un crs projeté, adapté à la zone observée.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="les-reprojections.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_area</span>(nantes_buffer)</span></code></pre></div>
<pre><code>3185131 [m^2]</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="les-reprojections.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_area</span>(nantes_proj_buffer)</span></code></pre></div>
<pre><code>3140157 [m^2]</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="les-reprojections.html#cb145-1" aria-hidden="true" tabindex="-1"></a>pi<span class="sc">*</span><span class="dv">1000</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 3141593</code></pre>
</div>
<div id="quand-reprojeter" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Quand reprojeter ?<a href="les-reprojections.html#quand-reprojeter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Quelques cas usuels qui peuvent vous amener à reprojeter vos données :</p>
<ul>
<li><p>la manipulation de données fournies dans des CRS différents</p></li>
<li><p>l’usage du package leaflet impose des données spécifiées en WGS 84</p></li>
<li><p>le besoin de visualiser vos données suivant la conversion de certaines propriétés des objets à la surface de la terre.</p></li>
<li><p>l’usage de fonctions recommandant d’utiliser des CRS projetés (comme <code>st_buffer()</code>, <code>st_area()</code> ci-dessus)</p></li>
</ul>
<p>Un exemple d’usage : la distance de Rennes à Nantes</p>
<p>Prenons les coordonnées WGS 84 de Rennes</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="les-reprojections.html#cb147-1" aria-hidden="true" tabindex="-1"></a>rennes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">lon =</span> <span class="sc">-</span><span class="fl">1.6777926</span>, <span class="at">lat =</span> <span class="fl">48.117266</span>) <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="les-reprojections.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb147-3"><a href="les-reprojections.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_set_crs</span>(<span class="dv">4326</span>)</span></code></pre></div>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="les-reprojections.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapview</span>(rennes)</span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-f25b83c300d4a81ebb62" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f25b83c300d4a81ebb62">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron","CartoDB.Positron","CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter","CartoDB.DarkMatter","CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenTopoMap","OpenTopoMap","OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[48.117266,-1.6777926,6,null,"rennes",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":1,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6},null,null,"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>geometry&emsp;<\/th><td>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-1.6777926,48.117266,-1.6777926,48.117266,true,"rennes","Zoom to rennes","<strong> rennes <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"rennes",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["rennes"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"rennes"}]}],"limits":{"lat":[48.117266,48.117266],"lng":[-1.6777926,-1.6777926]},"setView":[[48.117266,-1.6777926],18,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
<p>Tentons de calculer la distance de Rennes à Nantes.
Avec la données en Lambert 93, la fonction <code>st_distance()</code> renvoie un message d’erreur.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="les-reprojections.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes, nantes_proj)</span></code></pre></div>
<pre><code>Error in st_distance(rennes, nantes_proj): st_crs(x) == st_crs(y) is not TRUE</code></pre>
<p>Avec la données en WGS 84, la fonction <code>st_distance()</code> renvoie bien un résultat.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="les-reprojections.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes, nantes)</span></code></pre></div>
<pre><code>Units: [m]
         [,1]
[1,] 100384.2</code></pre>
<p>Avec la données en Lambert 93, la fonction <code>st_distance()</code> renvoie un résultat plus précis :</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="les-reprojections.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_distance</span>(rennes <span class="sc">%&gt;%</span> <span class="fu">st_transform</span>(<span class="dv">2154</span>), nantes_proj)</span></code></pre></div>
<pre><code>Units: [m]
         [,1]
[1,] 100302.7</code></pre>
</div>
<div id="quel-crs-utiliser" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Quel CRS utiliser ?<a href="les-reprojections.html#quel-crs-utiliser" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A cette question, il y a rarement une seule bonne réponse.</p>
<p>En ce qui concerne les CRS géométriques, le plus simple est d’utiliser le WGS 84 (EPSG 4326), qui est de loin le plus populaire, avec lequel beaucoup de données sont fournies.</p>
<p>En ce qui concerne les CRS projetés, il existe des CRS officiels à utiliser préférentiellement pour les données françaises.
En métropole, on utilise le Lambert 93 (EPSG 2154).
Pour les DROM, on utilise les CRS :</p>
<ul>
<li>RGAF09 / UTM zone 20N, code EPSG 5490, pour les Antilles françaises,<br />
</li>
<li>RGFG95 / UTM zone 22N, code EPSG 2972, pour la Guyane,</li>
<li>RGR92 / UTM zone 40S, code EPSG 2975, pour la Réunion,</li>
<li>RGM04 / UTM zone 38S, code EPSG 4471, pour Mayotte.</li>
</ul>
<p>Ensuite votre choix va dépendre des propriétés que vous souhaitez conserver.</p>
</div>
<div id="comment-projeter" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Comment projeter ?<a href="les-reprojections.html#comment-projeter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="projeter-des-vecteurs" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Projeter des vecteurs<a href="les-reprojections.html#projeter-des-vecteurs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reprojeter des données vecteur se fait à l’aide de la fonction <code>st_transform()</code>, que nous avons vue précédemment.</p>
</div>
<div id="modifier-la-projection-dune-carte." class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Modifier la projection d’une carte.<a href="les-reprojections.html#modifier-la-projection-dune-carte." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parfois on souhaite pouvoir aller plus loin dans les reprojections, en adaptant le centre de la projection, pour cela on peut utiliser une <code>proj4string</code> ad hoc.</p>
<p>Pour cela, on va modifier l’argument <code>+proj</code> de notre crs avec <code>st_transform</code>.</p>
<p>Tentons par exemple de reprojeter notre carte du globe en utilisant la projection azimutale équivalente de Lambert, centrée sur Pékin.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="les-reprojections.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;World&quot;</span>)</span>
<span id="cb155-2"><a href="les-reprojections.html#cb155-2" aria-hidden="true" tabindex="-1"></a>World_pekin <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(World, <span class="at">crs =</span> <span class="st">&quot;+proj=laea +x_0=0 +y_0=0 +lon_0=116 +lat_0=40&quot;</span>)</span></code></pre></div>
<p>Le paramètre <code>+proj=laea</code> permet de redéfinir la projection, les paramètres <code>+lon_0</code> et <code>lat_0</code> permettent de définir le centre de la projection. <code>x_0</code> et <code>y_0</code> définissent le centre du plan pour les coordonnées.</p>
<p>Qu’est ce qui a changé entre nos deux cartes ?</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="les-reprojections.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(World)</span></code></pre></div>
<pre><code>Coordinate Reference System:
  User input: EPSG:4326 
  wkt:
GEOGCRS[&quot;WGS 84&quot;,
    DATUM[&quot;World Geodetic System 1984&quot;,
        ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
            LENGTHUNIT[&quot;metre&quot;,1]]],
    PRIMEM[&quot;Greenwich&quot;,0,
        ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS[&quot;geodetic latitude (Lat)&quot;,north,
            ORDER[1],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        AXIS[&quot;geodetic longitude (Lon)&quot;,east,
            ORDER[2],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    USAGE[
        SCOPE[&quot;unknown&quot;],
        AREA[&quot;World&quot;],
        BBOX[-90,-180,90,180]],
    ID[&quot;EPSG&quot;,4326]]</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="les-reprojections.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(World_pekin)</span></code></pre></div>
<pre><code>Coordinate Reference System:
  User input: +proj=laea +x_0=0 +y_0=0 +lon_0=116 +lat_0=40 
  wkt:
PROJCRS[&quot;unknown&quot;,
    BASEGEOGCRS[&quot;unknown&quot;,
        DATUM[&quot;World Geodetic System 1984&quot;,
            ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
                LENGTHUNIT[&quot;metre&quot;,1]],
            ID[&quot;EPSG&quot;,6326]],
        PRIMEM[&quot;Greenwich&quot;,0,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8901]]],
    CONVERSION[&quot;unknown&quot;,
        METHOD[&quot;Lambert Azimuthal Equal Area&quot;,
            ID[&quot;EPSG&quot;,9820]],
        PARAMETER[&quot;Latitude of natural origin&quot;,40,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8801]],
        PARAMETER[&quot;Longitude of natural origin&quot;,116,
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433],
            ID[&quot;EPSG&quot;,8802]],
        PARAMETER[&quot;False easting&quot;,0,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8806]],
        PARAMETER[&quot;False northing&quot;,0,
            LENGTHUNIT[&quot;metre&quot;,1],
            ID[&quot;EPSG&quot;,8807]]],
    CS[Cartesian,2],
        AXIS[&quot;(E)&quot;,east,
            ORDER[1],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]],
        AXIS[&quot;(N)&quot;,north,
            ORDER[2],
            LENGTHUNIT[&quot;metre&quot;,1,
                ID[&quot;EPSG&quot;,9001]]]]</code></pre>
<p><img src="support_m7_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="operations-geometriques.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geocodage.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"pandoc_args": ["-M", "toc-title=Table des matières"]
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
